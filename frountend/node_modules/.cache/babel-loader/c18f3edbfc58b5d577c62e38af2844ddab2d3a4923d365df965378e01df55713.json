{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{useDispatch}from'react-redux';import{Helmet}from'react-helmet-async';import{getCurrentUser}from'../../store/slices/authSlice';import LoadingSpinner from'../../components/common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GoogleSuccess=()=>{const navigate=useNavigate();const dispatch=useDispatch();const[searchParams]=useSearchParams();const token=searchParams.get('token');useEffect(()=>{const handleGoogleAuthSuccess=async()=>{if(token){// Store the token\nlocalStorage.setItem('token',token);// Get user data\ntry{await dispatch(getCurrentUser()).unwrap();navigate('/',{replace:true});}catch(error){console.error('Failed to get user data:',error);navigate('/login',{replace:true,state:{error:'Google authentication failed'}});}}else{navigate('/login',{replace:true,state:{error:'No authentication token received'}});}};handleGoogleAuthSuccess();},[token,dispatch,navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Google Authentication - Blow Pack Plastic Industries\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Completing Google authentication...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Blow Pack Plastic\",className:\"h-12 w-auto\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-primary-600\",children:\"Blow Pack Plastic\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-3xl font-bold text-gray-900\",children:\"Completing Authentication\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Please wait while we complete your Google authentication...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-gray-600 text-center\",children:\"Setting up your account...\"})]})})})]});};export default GoogleSuccess;","map":{"version":3,"names":["React","useEffect","useNavigate","useSearchParams","useDispatch","Helmet","getCurrentUser","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","GoogleSuccess","navigate","dispatch","searchParams","token","get","handleGoogleAuthSuccess","localStorage","setItem","unwrap","replace","error","console","state","className","children","name","content","src","alt","size"],"sources":["E:/blowpack/frountend/src/pages/auth/GoogleSuccess.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { getCurrentUser } from '../../store/slices/authSlice';\r\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\r\n\r\nconst GoogleSuccess = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [searchParams] = useSearchParams();\r\n  const token = searchParams.get('token');\r\n\r\n  useEffect(() => {\r\n    const handleGoogleAuthSuccess = async () => {\r\n      if (token) {\r\n        // Store the token\r\n        localStorage.setItem('token', token);\r\n        \r\n        // Get user data\r\n        try {\r\n          await dispatch(getCurrentUser()).unwrap();\r\n          navigate('/', { replace: true });\r\n        } catch (error) {\r\n          console.error('Failed to get user data:', error);\r\n          navigate('/login', { \r\n            replace: true,\r\n            state: { error: 'Google authentication failed' }\r\n          });\r\n        }\r\n      } else {\r\n        navigate('/login', { \r\n          replace: true,\r\n          state: { error: 'No authentication token received' }\r\n        });\r\n      }\r\n    };\r\n\r\n    handleGoogleAuthSuccess();\r\n  }, [token, dispatch, navigate]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n      <Helmet>\r\n        <title>Google Authentication - Blow Pack Plastic Industries</title>\r\n        <meta name=\"description\" content=\"Completing Google authentication...\" />\r\n      </Helmet>\r\n\r\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"text-center\">\r\n          <div className=\"flex items-center justify-center space-x-3 mb-4\">\r\n            <img \r\n              src=\"/logo.png\" \r\n              alt=\"Blow Pack Plastic\" \r\n              className=\"h-12 w-auto\"\r\n            />\r\n            <h1 className=\"text-3xl font-bold text-primary-600\">Blow Pack Plastic</h1>\r\n          </div>\r\n          <h2 className=\"mt-6 text-3xl font-bold text-gray-900\">\r\n            Completing Authentication\r\n          </h2>\r\n          <p className=\"mt-2 text-sm text-gray-600\">\r\n            Please wait while we complete your Google authentication...\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\r\n          <div className=\"flex flex-col items-center\">\r\n            <LoadingSpinner size=\"lg\" />\r\n            <p className=\"mt-4 text-sm text-gray-600 text-center\">\r\n              Setting up your account...\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleSuccess;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}