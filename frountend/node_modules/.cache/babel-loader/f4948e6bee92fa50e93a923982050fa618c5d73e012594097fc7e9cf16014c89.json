{"ast":null,"code":"var _jsxFileName = \"E:\\\\blowpack\\\\frountend\\\\src\\\\utils\\\\errorHandler.js\";\nimport React from 'react';\n\n// Error handling utility for API responses\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const handleApiError = (error, response = null) => {\n  var _response$headers;\n  let errorMessage = 'Something went wrong. Please try again.';\n  let shouldRetry = false;\n  let retryAfter = null;\n\n  // Handle different types of errors\n  if (response) {\n    var _response$data;\n    const status = response.status;\n    switch (status) {\n      case 400:\n        errorMessage = 'Invalid request. Please check your input and try again.';\n        break;\n      case 401:\n        errorMessage = 'Please login to continue.';\n        // Redirect to login\n        setTimeout(() => {\n          window.location.href = '/login';\n        }, 2000);\n        break;\n      case 403:\n        errorMessage = 'You do not have permission to perform this action.';\n        break;\n      case 404:\n        errorMessage = 'The requested resource was not found.';\n        break;\n      case 409:\n        errorMessage = 'This action conflicts with existing data. Please refresh and try again.';\n        break;\n      case 422:\n        errorMessage = 'Please check your input and try again.';\n        break;\n      case 429:\n        errorMessage = 'Too many requests. Please wait a moment before trying again.';\n        shouldRetry = true;\n        retryAfter = ((_response$headers = response.headers) === null || _response$headers === void 0 ? void 0 : _response$headers.get('Retry-After')) || 60;\n        // Add retry information to the error\n        error.retryAfter = retryAfter;\n        error.isRateLimited = true;\n        break;\n      case 500:\n        errorMessage = 'Server error. Please try again later.';\n        shouldRetry = true;\n        break;\n      case 502:\n      case 503:\n      case 504:\n        errorMessage = 'Service temporarily unavailable. Please try again later.';\n        shouldRetry = true;\n        break;\n      default:\n        errorMessage = `Request failed with status ${status}. Please try again.`;\n        shouldRetry = status >= 500;\n    }\n\n    // Try to get error message from response body\n    if ((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.message) {\n      errorMessage = response.data.message;\n    }\n  } else if (error.message) {\n    // Network or other errors\n    if (error.message.includes('Network Error') || error.message.includes('Failed to fetch')) {\n      errorMessage = 'Network error. Please check your internet connection and try again.';\n      shouldRetry = true;\n    } else if (error.message.includes('timeout')) {\n      errorMessage = 'Request timed out. Please try again.';\n      shouldRetry = true;\n    } else {\n      errorMessage = error.message;\n    }\n  }\n  return {\n    message: errorMessage,\n    shouldRetry,\n    retryAfter,\n    status: (response === null || response === void 0 ? void 0 : response.status) || 0\n  };\n};\n\n// Retry utility with exponential backoff\nexport const retryRequest = async (requestFn, maxRetries = 3, baseDelay = 1000) => {\n  let lastError;\n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      return await requestFn();\n    } catch (error) {\n      var _error$response;\n      lastError = error;\n\n      // Don't retry on 429 errors - respect rate limiting\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 429) {\n        throw error;\n      }\n      if (attempt === maxRetries) {\n        throw error;\n      }\n\n      // Calculate delay with exponential backoff\n      const delay = baseDelay * Math.pow(2, attempt);\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  throw lastError;\n};\n\n// Error messages for different scenarios\nexport const ERROR_MESSAGES = {\n  NETWORK_ERROR: 'Network error. Please check your internet connection.',\n  TIMEOUT_ERROR: 'Request timed out. Please try again.',\n  RATE_LIMIT_ERROR: 'Too many requests. Please wait a moment before trying again.',\n  SERVER_ERROR: 'Server error. Please try again later.',\n  UNAUTHORIZED: 'Please login to continue.',\n  FORBIDDEN: 'You do not have permission to perform this action.',\n  NOT_FOUND: 'The requested resource was not found.',\n  VALIDATION_ERROR: 'Please check your input and try again.',\n  GENERIC_ERROR: 'Something went wrong. Please try again.'\n};\n\n// Error boundary component for React\nexport class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      hasError: true,\n      error\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n  }\n  render() {\n    if (this.state.hasError) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto h-12 w-12 text-red-500 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-gray-900 mb-2\",\n            children: \"Something went wrong\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: \"We're sorry, but something unexpected happened.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.location.reload(),\n            className: \"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\",\n            children: \"Reload Page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this);\n    }\n    return this.props.children;\n  }\n}","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","handleApiError","error","response","_response$headers","errorMessage","shouldRetry","retryAfter","_response$data","status","setTimeout","window","location","href","headers","get","isRateLimited","data","message","includes","retryRequest","requestFn","maxRetries","baseDelay","lastError","attempt","_error$response","delay","Math","pow","Promise","resolve","ERROR_MESSAGES","NETWORK_ERROR","TIMEOUT_ERROR","RATE_LIMIT_ERROR","SERVER_ERROR","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","VALIDATION_ERROR","GENERIC_ERROR","ErrorBoundary","Component","constructor","props","state","hasError","getDerivedStateFromError","componentDidCatch","errorInfo","console","render","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","onClick","reload"],"sources":["E:/blowpack/frountend/src/utils/errorHandler.js"],"sourcesContent":["import React from 'react';\n\n// Error handling utility for API responses\nexport const handleApiError = (error, response = null) => {\n  let errorMessage = 'Something went wrong. Please try again.';\n  let shouldRetry = false;\n  let retryAfter = null;\n\n  // Handle different types of errors\n  if (response) {\n    const status = response.status;\n    \n    switch (status) {\n      case 400:\n        errorMessage = 'Invalid request. Please check your input and try again.';\n        break;\n      case 401:\n        errorMessage = 'Please login to continue.';\n        // Redirect to login\n        setTimeout(() => {\n          window.location.href = '/login';\n        }, 2000);\n        break;\n      case 403:\n        errorMessage = 'You do not have permission to perform this action.';\n        break;\n      case 404:\n        errorMessage = 'The requested resource was not found.';\n        break;\n      case 409:\n        errorMessage = 'This action conflicts with existing data. Please refresh and try again.';\n        break;\n      case 422:\n        errorMessage = 'Please check your input and try again.';\n        break;\n      case 429:\n        errorMessage = 'Too many requests. Please wait a moment before trying again.';\n        shouldRetry = true;\n        retryAfter = response.headers?.get('Retry-After') || 60;\n        // Add retry information to the error\n        error.retryAfter = retryAfter;\n        error.isRateLimited = true;\n        break;\n      case 500:\n        errorMessage = 'Server error. Please try again later.';\n        shouldRetry = true;\n        break;\n      case 502:\n      case 503:\n      case 504:\n        errorMessage = 'Service temporarily unavailable. Please try again later.';\n        shouldRetry = true;\n        break;\n      default:\n        errorMessage = `Request failed with status ${status}. Please try again.`;\n        shouldRetry = status >= 500;\n    }\n\n    // Try to get error message from response body\n    if (response.data?.message) {\n      errorMessage = response.data.message;\n    }\n  } else if (error.message) {\n    // Network or other errors\n    if (error.message.includes('Network Error') || error.message.includes('Failed to fetch')) {\n      errorMessage = 'Network error. Please check your internet connection and try again.';\n      shouldRetry = true;\n    } else if (error.message.includes('timeout')) {\n      errorMessage = 'Request timed out. Please try again.';\n      shouldRetry = true;\n    } else {\n      errorMessage = error.message;\n    }\n  }\n\n  return {\n    message: errorMessage,\n    shouldRetry,\n    retryAfter,\n    status: response?.status || 0\n  };\n};\n\n// Retry utility with exponential backoff\nexport const retryRequest = async (requestFn, maxRetries = 3, baseDelay = 1000) => {\n  let lastError;\n  \n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      return await requestFn();\n    } catch (error) {\n      lastError = error;\n      \n      // Don't retry on 429 errors - respect rate limiting\n      if (error.response?.status === 429) {\n        throw error;\n      }\n      \n      if (attempt === maxRetries) {\n        throw error;\n      }\n      \n      // Calculate delay with exponential backoff\n      const delay = baseDelay * Math.pow(2, attempt);\n      await new Promise(resolve => setTimeout(resolve, delay));\n    }\n  }\n  \n  throw lastError;\n};\n\n// Error messages for different scenarios\nexport const ERROR_MESSAGES = {\n  NETWORK_ERROR: 'Network error. Please check your internet connection.',\n  TIMEOUT_ERROR: 'Request timed out. Please try again.',\n  RATE_LIMIT_ERROR: 'Too many requests. Please wait a moment before trying again.',\n  SERVER_ERROR: 'Server error. Please try again later.',\n  UNAUTHORIZED: 'Please login to continue.',\n  FORBIDDEN: 'You do not have permission to perform this action.',\n  NOT_FOUND: 'The requested resource was not found.',\n  VALIDATION_ERROR: 'Please check your input and try again.',\n  GENERIC_ERROR: 'Something went wrong. Please try again.'\n};\n\n// Error boundary component for React\nexport class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Error caught by boundary:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n          <div className=\"text-center\">\n            <div className=\"mx-auto h-12 w-12 text-red-500 mb-4\">\n              <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Something went wrong</h2>\n            <p className=\"text-gray-600 mb-4\">We're sorry, but something unexpected happened.</p>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\"\n            >\n              Reload Page\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}