{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,Link}from'react-router-dom';import{Helmet}from'react-helmet-async';import{useDispatch,useSelector}from'react-redux';import{StarIcon,HeartIcon,ShoppingCartIcon,MinusIcon,PlusIcon}from'@heroicons/react/24/outline';import{fetchProduct,addToCart,addToWishlist}from'../store/slices/productSlice';import{addToCart as addToCartAction}from'../store/slices/cartSlice';import{addToWishlist as addToWishlistAction}from'../store/slices/wishlistSlice';import{fetchProductReviews}from'../store/slices/reviewSlice';import LoadingSpinner from'../components/common/LoadingSpinner';import Button from'../components/common/Button';import ReviewList from'../components/reviews/ReviewList';import ReviewForm from'../components/reviews/ReviewForm';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetail=()=>{var _currentProduct$image,_currentProduct$image2,_currentProduct$image3,_currentProduct$ratin2,_currentProduct$ratin3,_currentProduct$ratin4,_currentProduct$categ,_currentProduct$ratin6,_currentProduct$ratin7,_currentProduct$ratin8;const{id}=useParams();const dispatch=useDispatch();const{currentProduct,relatedProducts,loading}=useSelector(state=>state.products);const{isAuthenticated,user}=useSelector(state=>state.auth);const[quantity,setQuantity]=React.useState(1);const[showReviewForm,setShowReviewForm]=useState(false);const[editingReview,setEditingReview]=useState(null);const[canWriteReview,setCanWriteReview]=useState(false);const[userDeliveredOrders,setUserDeliveredOrders]=useState([]);useEffect(()=>{if(id&&id!=='undefined'){dispatch(fetchProduct(id));dispatch(fetchProductReviews({productId:id}));}else if(id==='undefined'){toast.error('Invalid product ID');}},[dispatch,id]);// Check if user can write review for this product\nuseEffect(()=>{const checkCanWriteReview=async()=>{if(!isAuthenticated||!currentProduct){setCanWriteReview(false);return;}try{const token=localStorage.getItem('token');const response=await fetch('/api/orders',{headers:{Authorization:\"Bearer \".concat(token)}});if(response.ok){const data=await response.json();const deliveredOrders=data.data.orders.filter(order=>order.orderStatus==='delivered');setUserDeliveredOrders(deliveredOrders);// Check if any delivered order contains this product\nconst hasDeliveredOrderWithProduct=deliveredOrders.some(order=>order.items.some(item=>(item.product._id||item.product)===currentProduct._id));setCanWriteReview(hasDeliveredOrderWithProduct);}}catch(error){console.error('Error checking user orders:',error);setCanWriteReview(false);}};checkCanWriteReview();},[isAuthenticated,currentProduct]);const handleEditReview=review=>{setEditingReview(review);setShowReviewForm(true);};const handleDeleteReview=()=>{// Refresh reviews after deletion\ndispatch(fetchProductReviews({productId:id}));};const handleReviewSuccess=()=>{setShowReviewForm(false);setEditingReview(null);// Refresh reviews and product data after creation/update\ndispatch(fetchProductReviews({productId:id}));dispatch(fetchProduct(id));// Refresh product data to get updated ratings\n// Show success message\ntoast.success('Review added successfully!');};const handleAddToCart=async()=>{if(!isAuthenticated){toast.error('Please login to add items to cart');return;}try{await dispatch(addToCartAction({productId:currentProduct._id,quantity}));toast.success('Product added to cart');}catch(error){toast.error('Failed to add product to cart');}};const handleAddToWishlist=async()=>{if(!isAuthenticated){toast.error('Please login to add items to wishlist');return;}try{await dispatch(addToWishlistAction(currentProduct._id));toast.success('Product added to wishlist');}catch(error){toast.error('Failed to add product to wishlist');}};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{size:\"xl\",className:\"min-h-screen\"});}if(!currentProduct){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Product Not Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"The product you're looking for doesn't exist.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsxs(\"title\",{children:[currentProduct.name,\" - Packwell Plastic Industries\"]}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:currentProduct.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:((_currentProduct$image=currentProduct.images)===null||_currentProduct$image===void 0?void 0:(_currentProduct$image2=_currentProduct$image[0])===null||_currentProduct$image2===void 0?void 0:_currentProduct$image2.url)||'/placeholder-product.svg',alt:currentProduct.name,className:\"w-full h-96 object-cover\"})}),((_currentProduct$image3=currentProduct.images)===null||_currentProduct$image3===void 0?void 0:_currentProduct$image3.length)>1&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-4\",children:currentProduct.images.slice(1,5).map((image,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:\"\".concat(currentProduct.name,\" \").concat(index+2),className:\"w-full h-20 object-cover\"})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:currentProduct.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:[...Array(5)].map((_,i)=>{var _currentProduct$ratin;return/*#__PURE__*/_jsx(StarIcon,{className:\"h-5 w-5 \".concat(i<Math.floor(((_currentProduct$ratin=currentProduct.ratings)===null||_currentProduct$ratin===void 0?void 0:_currentProduct$ratin.average)||0)?'text-yellow-400':'text-gray-300'),fill:\"currentColor\"},i);})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-semibold text-gray-900\",children:((_currentProduct$ratin2=currentProduct.ratings)===null||_currentProduct$ratin2===void 0?void 0:(_currentProduct$ratin3=_currentProduct$ratin2.average)===null||_currentProduct$ratin3===void 0?void 0:_currentProduct$ratin3.toFixed(1))||'0.0'}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600\",children:[\"(\",((_currentProduct$ratin4=currentProduct.ratings)===null||_currentProduct$ratin4===void 0?void 0:_currentProduct$ratin4.count)||0,\" reviews)\"]})]}),currentProduct.isFeatured&&/*#__PURE__*/_jsx(\"span\",{className:\"bg-primary-600 text-white text-xs px-2 py-1 rounded-full\",children:\"Featured\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-3xl font-bold text-primary-600\",children:[\"\\u20B9\",currentProduct.price]}),currentProduct.originalPrice&&currentProduct.originalPrice>currentProduct.price&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl text-gray-500 line-through\",children:[\"\\u20B9\",currentProduct.originalPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"SKU:\"}),\" \",currentProduct.sku]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Category:\"}),\" \",(_currentProduct$categ=currentProduct.category)===null||_currentProduct$categ===void 0?void 0:_currentProduct$categ.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Stock:\"}),\" \",currentProduct.stock>0?\"\".concat(currentProduct.stock,\" available\"):'Out of stock']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:currentProduct.description})]}),currentProduct.material&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Material\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:currentProduct.material})]}),currentProduct.color&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Color\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:currentProduct.color})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Quantity:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center border border-gray-300 rounded-md\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.max(1,quantity-1)),className:\"p-2 hover:bg-gray-100\",disabled:quantity<=1,children:/*#__PURE__*/_jsx(MinusIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"px-4 py-2 border-x border-gray-300 min-w-[3rem] text-center\",children:quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.min(currentProduct.stock,quantity+1)),className:\"p-2 hover:bg-gray-100\",disabled:quantity>=currentProduct.stock,children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(Button,{onClick:handleAddToCart,disabled:currentProduct.stock===0,className:\"flex-1\",children:[/*#__PURE__*/_jsx(ShoppingCartIcon,{className:\"h-5 w-5 mr-2\"}),\"Add to Cart\"]}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",onClick:handleAddToWishlist,className:\"px-4\",children:/*#__PURE__*/_jsx(HeartIcon,{className:\"h-5 w-5\"})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-6\",children:\"Product Description\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"prose max-w-none\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 leading-relaxed\",children:currentProduct.description}),currentProduct.shortDescription&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Key Features\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:currentProduct.shortDescription})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Customer Reviews\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:[...Array(5)].map((_,i)=>{var _currentProduct$ratin5;return/*#__PURE__*/_jsx(StarIcon,{className:\"h-6 w-6 \".concat(i<Math.floor(((_currentProduct$ratin5=currentProduct.ratings)===null||_currentProduct$ratin5===void 0?void 0:_currentProduct$ratin5.average)||0)?'text-yellow-400':'text-gray-300'),fill:\"currentColor\"},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:((_currentProduct$ratin6=currentProduct.ratings)===null||_currentProduct$ratin6===void 0?void 0:(_currentProduct$ratin7=_currentProduct$ratin6.average)===null||_currentProduct$ratin7===void 0?void 0:_currentProduct$ratin7.toFixed(1))||'0.0'}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Based on \",((_currentProduct$ratin8=currentProduct.ratings)===null||_currentProduct$ratin8===void 0?void 0:_currentProduct$ratin8.count)||0,\" reviews\"]})]})]})})]}),isAuthenticated&&canWriteReview&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:!showReviewForm?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Share Your Experience\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"You purchased this product and it has been delivered. Help other customers by writing a review.\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowReviewForm(true),children:\"Write a Review\"})]}):/*#__PURE__*/_jsx(ReviewForm,{productId:currentProduct._id,orderId:null,existingReview:editingReview,onSuccess:handleReviewSuccess,onCancel:()=>{setShowReviewForm(false);setEditingReview(null);}})}),isAuthenticated&&!canWriteReview&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Write a Review\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"You can write a review for this product after purchasing it and receiving your order.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Only customers who have received delivered orders can write reviews.\"})]})}),!isAuthenticated&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Write a Review\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Please log in to write a review for this product.\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(Button,{children:\"Log In\"})})]})}),/*#__PURE__*/_jsx(ReviewList,{productId:currentProduct._id,onEditReview:handleEditReview,onDeleteReview:handleDeleteReview})]}),relatedProducts&&relatedProducts.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-16\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-8\",children:\"Related Products\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\",children:relatedProducts.map(product=>{var _product$images,_product$images$;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-w-1 aspect-h-1 bg-gray-200\",children:/*#__PURE__*/_jsx(\"img\",{src:((_product$images=product.images)===null||_product$images===void 0?void 0:(_product$images$=_product$images[0])===null||_product$images$===void 0?void 0:_product$images$.url)||'/placeholder-product.svg',alt:product.name,className:\"w-full h-48 object-cover\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2 line-clamp-2\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-primary-600\",children:[\"\\u20B9\",product.price]}),/*#__PURE__*/_jsx(\"a\",{href:\"/products/\".concat(product._id),className:\"text-primary-600 hover:text-primary-700 font-medium text-sm\",children:\"View Details\"})]})]})]},product._id);})})]})]})]});};export default ProductDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","Helmet","useDispatch","useSelector","StarIcon","HeartIcon","ShoppingCartIcon","MinusIcon","PlusIcon","fetchProduct","addToCart","addToWishlist","addToCartAction","addToWishlistAction","fetchProductReviews","LoadingSpinner","Button","ReviewList","ReviewForm","toast","jsx","_jsx","jsxs","_jsxs","ProductDetail","_currentProduct$image","_currentProduct$image2","_currentProduct$image3","_currentProduct$ratin2","_currentProduct$ratin3","_currentProduct$ratin4","_currentProduct$categ","_currentProduct$ratin6","_currentProduct$ratin7","_currentProduct$ratin8","id","dispatch","currentProduct","relatedProducts","loading","state","products","isAuthenticated","user","auth","quantity","setQuantity","showReviewForm","setShowReviewForm","editingReview","setEditingReview","canWriteReview","setCanWriteReview","userDeliveredOrders","setUserDeliveredOrders","productId","error","checkCanWriteReview","token","localStorage","getItem","response","fetch","headers","Authorization","concat","ok","data","json","deliveredOrders","orders","filter","order","orderStatus","hasDeliveredOrderWithProduct","some","items","item","product","_id","console","handleEditReview","review","handleDeleteReview","handleReviewSuccess","success","handleAddToCart","handleAddToWishlist","size","className","children","name","content","description","src","images","url","alt","length","slice","map","image","index","Array","_","i","_currentProduct$ratin","Math","floor","ratings","average","fill","toFixed","count","isFeatured","price","originalPrice","sku","category","stock","material","color","onClick","max","disabled","min","variant","shortDescription","_currentProduct$ratin5","orderId","existingReview","onSuccess","onCancel","to","onEditReview","onDeleteReview","_product$images","_product$images$","href"],"sources":["E:/blowpack/frountend/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { \n  StarIcon, \n  HeartIcon, \n  ShoppingCartIcon,\n  MinusIcon,\n  PlusIcon\n} from '@heroicons/react/24/outline';\nimport { fetchProduct, addToCart, addToWishlist } from '../store/slices/productSlice';\nimport { addToCart as addToCartAction } from '../store/slices/cartSlice';\nimport { addToWishlist as addToWishlistAction } from '../store/slices/wishlistSlice';\nimport { fetchProductReviews } from '../store/slices/reviewSlice';\nimport LoadingSpinner from '../components/common/LoadingSpinner';\nimport Button from '../components/common/Button';\nimport ReviewList from '../components/reviews/ReviewList';\nimport ReviewForm from '../components/reviews/ReviewForm';\nimport { toast } from 'react-toastify';\n\nconst ProductDetail = () => {\n  const { id } = useParams();\n  const dispatch = useDispatch();\n  const { currentProduct, relatedProducts, loading } = useSelector((state) => state.products);\n  const { isAuthenticated, user } = useSelector((state) => state.auth);\n  const [quantity, setQuantity] = React.useState(1);\n  const [showReviewForm, setShowReviewForm] = useState(false);\n  const [editingReview, setEditingReview] = useState(null);\n  const [canWriteReview, setCanWriteReview] = useState(false);\n  const [userDeliveredOrders, setUserDeliveredOrders] = useState([]);\n\n  useEffect(() => {\n    if (id && id !== 'undefined') {\n      dispatch(fetchProduct(id));\n      dispatch(fetchProductReviews({ productId: id }));\n    } else if (id === 'undefined') {\n      toast.error('Invalid product ID');\n    }\n  }, [dispatch, id]);\n\n  // Check if user can write review for this product\n  useEffect(() => {\n    const checkCanWriteReview = async () => {\n      if (!isAuthenticated || !currentProduct) {\n        setCanWriteReview(false);\n        return;\n      }\n\n      try {\n        const token = localStorage.getItem('token');\n        const response = await fetch('/api/orders', {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          const deliveredOrders = data.data.orders.filter(order => \n            order.orderStatus === 'delivered'\n          );\n          \n          setUserDeliveredOrders(deliveredOrders);\n          \n          // Check if any delivered order contains this product\n          const hasDeliveredOrderWithProduct = deliveredOrders.some(order =>\n            order.items.some(item => \n              (item.product._id || item.product) === currentProduct._id\n            )\n          );\n          \n          setCanWriteReview(hasDeliveredOrderWithProduct);\n        }\n      } catch (error) {\n        console.error('Error checking user orders:', error);\n        setCanWriteReview(false);\n      }\n    };\n\n    checkCanWriteReview();\n  }, [isAuthenticated, currentProduct]);\n\n  const handleEditReview = (review) => {\n    setEditingReview(review);\n    setShowReviewForm(true);\n  };\n\n  const handleDeleteReview = () => {\n    // Refresh reviews after deletion\n    dispatch(fetchProductReviews({ productId: id }));\n  };\n\n  const handleReviewSuccess = () => {\n    setShowReviewForm(false);\n    setEditingReview(null);\n    // Refresh reviews and product data after creation/update\n    dispatch(fetchProductReviews({ productId: id }));\n    dispatch(fetchProduct(id)); // Refresh product data to get updated ratings\n    \n    // Show success message\n    toast.success('Review added successfully!');\n  };\n\n  const handleAddToCart = async () => {\n    if (!isAuthenticated) {\n      toast.error('Please login to add items to cart');\n      return;\n    }\n\n    try {\n      await dispatch(addToCartAction({ productId: currentProduct._id, quantity }));\n      toast.success('Product added to cart');\n    } catch (error) {\n      toast.error('Failed to add product to cart');\n    }\n  };\n\n  const handleAddToWishlist = async () => {\n    if (!isAuthenticated) {\n      toast.error('Please login to add items to wishlist');\n      return;\n    }\n\n    try {\n      await dispatch(addToWishlistAction(currentProduct._id));\n      toast.success('Product added to wishlist');\n    } catch (error) {\n      toast.error('Failed to add product to wishlist');\n    }\n  };\n\n  if (loading) {\n    return <LoadingSpinner size=\"xl\" className=\"min-h-screen\" />;\n  }\n\n  if (!currentProduct) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Product Not Found</h2>\n          <p className=\"text-gray-600\">The product you're looking for doesn't exist.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Helmet>\n        <title>{currentProduct.name} - Packwell Plastic Industries</title>\n        <meta name=\"description\" content={currentProduct.description} />\n      </Helmet>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\n          {/* Product Images */}\n          <div className=\"space-y-4\">\n            <div className=\"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden\">\n              <img\n                src={currentProduct.images?.[0]?.url || '/placeholder-product.svg'}\n                alt={currentProduct.name}\n                className=\"w-full h-96 object-cover\"\n              />\n            </div>\n            {currentProduct.images?.length > 1 && (\n              <div className=\"grid grid-cols-4 gap-4\">\n                {currentProduct.images.slice(1, 5).map((image, index) => (\n                  <div key={index} className=\"aspect-w-1 aspect-h-1 bg-gray-200 rounded-lg overflow-hidden\">\n                    <img\n                      src={image.url}\n                      alt={`${currentProduct.name} ${index + 2}`}\n                      className=\"w-full h-20 object-cover\"\n                    />\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Product Info */}\n          <div className=\"space-y-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                {currentProduct.name}\n              </h1>\n              <div className=\"flex items-center space-x-4 mb-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"flex items-center\">\n                    {[...Array(5)].map((_, i) => (\n                      <StarIcon\n                        key={i}\n                        className={`h-5 w-5 ${\n                          i < Math.floor(currentProduct.ratings?.average || 0)\n                            ? 'text-yellow-400'\n                            : 'text-gray-300'\n                        }`}\n                        fill=\"currentColor\"\n                      />\n                    ))}\n                  </div>\n                  <span className=\"text-lg font-semibold text-gray-900\">\n                    {currentProduct.ratings?.average?.toFixed(1) || '0.0'}\n                  </span>\n                  <span className=\"text-gray-600\">\n                    ({currentProduct.ratings?.count || 0} reviews)\n                  </span>\n                </div>\n                {currentProduct.isFeatured && (\n                  <span className=\"bg-primary-600 text-white text-xs px-2 py-1 rounded-full\">\n                    Featured\n                  </span>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-3xl font-bold text-primary-600\">\n                ₹{currentProduct.price}\n              </span>\n              {currentProduct.originalPrice && currentProduct.originalPrice > currentProduct.price && (\n                <span className=\"text-xl text-gray-500 line-through\">\n                  ₹{currentProduct.originalPrice}\n                </span>\n              )}\n            </div>\n\n            <div className=\"text-gray-600\">\n              <p className=\"text-sm mb-2\">\n                <span className=\"font-medium\">SKU:</span> {currentProduct.sku}\n              </p>\n              <p className=\"text-sm mb-2\">\n                <span className=\"font-medium\">Category:</span> {currentProduct.category?.name}\n              </p>\n              <p className=\"text-sm\">\n                <span className=\"font-medium\">Stock:</span> {currentProduct.stock > 0 ? `${currentProduct.stock} available` : 'Out of stock'}\n              </p>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Description</h3>\n                <p className=\"text-gray-600\">{currentProduct.description}</p>\n              </div>\n\n              {currentProduct.material && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Material</h3>\n                  <p className=\"text-gray-600\">{currentProduct.material}</p>\n                </div>\n              )}\n\n              {currentProduct.color && (\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Color</h3>\n                  <p className=\"text-gray-600\">{currentProduct.color}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Quantity and Actions */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-4\">\n                <span className=\"text-sm font-medium text-gray-900\">Quantity:</span>\n                <div className=\"flex items-center border border-gray-300 rounded-md\">\n                  <button\n                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                    className=\"p-2 hover:bg-gray-100\"\n                    disabled={quantity <= 1}\n                  >\n                    <MinusIcon className=\"h-4 w-4\" />\n                  </button>\n                  <span className=\"px-4 py-2 border-x border-gray-300 min-w-[3rem] text-center\">\n                    {quantity}\n                  </span>\n                  <button\n                    onClick={() => setQuantity(Math.min(currentProduct.stock, quantity + 1))}\n                    className=\"p-2 hover:bg-gray-100\"\n                    disabled={quantity >= currentProduct.stock}\n                  >\n                    <PlusIcon className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-4\">\n                <Button\n                  onClick={handleAddToCart}\n                  disabled={currentProduct.stock === 0}\n                  className=\"flex-1\"\n                >\n                  <ShoppingCartIcon className=\"h-5 w-5 mr-2\" />\n                  Add to Cart\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={handleAddToWishlist}\n                  className=\"px-4\"\n                >\n                  <HeartIcon className=\"h-5 w-5\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Product Description */}\n        <div className=\"mt-16\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Product Description</h2>\n          <div className=\"prose max-w-none\">\n            <p className=\"text-gray-700 leading-relaxed\">\n              {currentProduct.description}\n            </p>\n            {currentProduct.shortDescription && (\n              <div className=\"mt-6\">\n                <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">Key Features</h4>\n                <p className=\"text-gray-700\">{currentProduct.shortDescription}</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Reviews Section */}\n        <div className=\"mt-16\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900\">\n              Customer Reviews\n            </h2>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"flex items-center\">\n                  {[...Array(5)].map((_, i) => (\n                    <StarIcon\n                      key={i}\n                      className={`h-6 w-6 ${\n                        i < Math.floor(currentProduct.ratings?.average || 0)\n                          ? 'text-yellow-400'\n                          : 'text-gray-300'\n                      }`}\n                      fill=\"currentColor\"\n                    />\n                  ))}\n                </div>\n                <div className=\"text-left\">\n                  <div className=\"text-2xl font-bold text-gray-900\">\n                    {currentProduct.ratings?.average?.toFixed(1) || '0.0'}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    Based on {currentProduct.ratings?.count || 0} reviews\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Review Form */}\n          {isAuthenticated && canWriteReview && (\n            <div className=\"mb-8\">\n              {!showReviewForm ? (\n                <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                    Share Your Experience\n                  </h3>\n                  <p className=\"text-gray-600 mb-4\">\n                    You purchased this product and it has been delivered. Help other customers by writing a review.\n                  </p>\n                  <Button onClick={() => setShowReviewForm(true)}>\n                    Write a Review\n                  </Button>\n                </div>\n              ) : (\n                <ReviewForm\n                  productId={currentProduct._id}\n                  orderId={null}\n                  existingReview={editingReview}\n                  onSuccess={handleReviewSuccess}\n                  onCancel={() => {\n                    setShowReviewForm(false);\n                    setEditingReview(null);\n                  }}\n                />\n              )}\n            </div>\n          )}\n\n          {/* Message for users who can't write reviews */}\n          {isAuthenticated && !canWriteReview && (\n            <div className=\"mb-8\">\n              <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Write a Review\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  You can write a review for this product after purchasing it and receiving your order.\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  Only customers who have received delivered orders can write reviews.\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Message for non-authenticated users */}\n          {!isAuthenticated && (\n            <div className=\"mb-8\">\n              <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Write a Review\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Please log in to write a review for this product.\n                </p>\n                <Link to=\"/login\">\n                  <Button>Log In</Button>\n                </Link>\n              </div>\n            </div>\n          )}\n\n          {/* Reviews List */}\n          <ReviewList\n            productId={currentProduct._id}\n            onEditReview={handleEditReview}\n            onDeleteReview={handleDeleteReview}\n          />\n        </div>\n\n        {/* Related Products */}\n        {relatedProducts && relatedProducts.length > 0 && (\n          <div className=\"mt-16\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-8\">Related Products</h2>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {relatedProducts.map((product) => (\n                <div key={product._id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300\">\n                  <div className=\"aspect-w-1 aspect-h-1 bg-gray-200\">\n                    <img\n                      src={product.images?.[0]?.url || '/placeholder-product.svg'}\n                      alt={product.name}\n                      className=\"w-full h-48 object-cover\"\n                    />\n                  </div>\n                  <div className=\"p-4\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2 line-clamp-2\">\n                      {product.name}\n                    </h3>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-xl font-bold text-primary-600\">\n                        ₹{product.price}\n                      </span>\n                      <a\n                        href={`/products/${product._id}`}\n                        className=\"text-primary-600 hover:text-primary-700 font-medium text-sm\"\n                      >\n                        View Details\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,IAAI,KAAQ,kBAAkB,CAClD,OAASC,MAAM,KAAQ,oBAAoB,CAC3C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OACEC,QAAQ,CACRC,SAAS,CACTC,gBAAgB,CAChBC,SAAS,CACTC,QAAQ,KACH,6BAA6B,CACpC,OAASC,YAAY,CAAEC,SAAS,CAAEC,aAAa,KAAQ,8BAA8B,CACrF,OAASD,SAAS,GAAI,CAAAE,eAAe,KAAQ,2BAA2B,CACxE,OAASD,aAAa,GAAI,CAAAE,mBAAmB,KAAQ,+BAA+B,CACpF,OAASC,mBAAmB,KAAQ,6BAA6B,CACjE,MAAO,CAAAC,cAAc,KAAM,qCAAqC,CAChE,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,UAAU,KAAM,kCAAkC,CACzD,MAAO,CAAAC,UAAU,KAAM,kCAAkC,CACzD,OAASC,KAAK,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAC1B,KAAM,CAAEC,EAAG,CAAC,CAAGpC,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAqC,QAAQ,CAAGlC,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEmC,cAAc,CAAEC,eAAe,CAAEC,OAAQ,CAAC,CAAGpC,WAAW,CAAEqC,KAAK,EAAKA,KAAK,CAACC,QAAQ,CAAC,CAC3F,KAAM,CAAEC,eAAe,CAAEC,IAAK,CAAC,CAAGxC,WAAW,CAAEqC,KAAK,EAAKA,KAAK,CAACI,IAAI,CAAC,CACpE,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGlD,KAAK,CAACE,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAACiD,cAAc,CAAEC,iBAAiB,CAAC,CAAGlD,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACmD,aAAa,CAAEC,gBAAgB,CAAC,CAAGpD,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACqD,cAAc,CAAEC,iBAAiB,CAAC,CAAGtD,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACuD,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGxD,QAAQ,CAAC,EAAE,CAAC,CAElED,SAAS,CAAC,IAAM,CACd,GAAIsC,EAAE,EAAIA,EAAE,GAAK,WAAW,CAAE,CAC5BC,QAAQ,CAAC3B,YAAY,CAAC0B,EAAE,CAAC,CAAC,CAC1BC,QAAQ,CAACtB,mBAAmB,CAAC,CAAEyC,SAAS,CAAEpB,EAAG,CAAC,CAAC,CAAC,CAClD,CAAC,IAAM,IAAIA,EAAE,GAAK,WAAW,CAAE,CAC7BhB,KAAK,CAACqC,KAAK,CAAC,oBAAoB,CAAC,CACnC,CACF,CAAC,CAAE,CAACpB,QAAQ,CAAED,EAAE,CAAC,CAAC,CAElB;AACAtC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4D,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CAACf,eAAe,EAAI,CAACL,cAAc,CAAE,CACvCe,iBAAiB,CAAC,KAAK,CAAC,CACxB,OACF,CAEA,GAAI,CACF,KAAM,CAAAM,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,aAAa,CAAE,CAC1CC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYP,KAAK,CAAG,CAC9C,CAAC,CAAC,CAEF,GAAIG,QAAQ,CAACK,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClC,KAAM,CAAAC,eAAe,CAAGF,IAAI,CAACA,IAAI,CAACG,MAAM,CAACC,MAAM,CAACC,KAAK,EACnDA,KAAK,CAACC,WAAW,GAAK,WACxB,CAAC,CAEDnB,sBAAsB,CAACe,eAAe,CAAC,CAEvC;AACA,KAAM,CAAAK,4BAA4B,CAAGL,eAAe,CAACM,IAAI,CAACH,KAAK,EAC7DA,KAAK,CAACI,KAAK,CAACD,IAAI,CAACE,IAAI,EACnB,CAACA,IAAI,CAACC,OAAO,CAACC,GAAG,EAAIF,IAAI,CAACC,OAAO,IAAMzC,cAAc,CAAC0C,GACxD,CACF,CAAC,CAED3B,iBAAiB,CAACsB,4BAA4B,CAAC,CACjD,CACF,CAAE,MAAOlB,KAAK,CAAE,CACdwB,OAAO,CAACxB,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDJ,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAEDK,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,CAACf,eAAe,CAAEL,cAAc,CAAC,CAAC,CAErC,KAAM,CAAA4C,gBAAgB,CAAIC,MAAM,EAAK,CACnChC,gBAAgB,CAACgC,MAAM,CAAC,CACxBlC,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAmC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B;AACA/C,QAAQ,CAACtB,mBAAmB,CAAC,CAAEyC,SAAS,CAAEpB,EAAG,CAAC,CAAC,CAAC,CAClD,CAAC,CAED,KAAM,CAAAiD,mBAAmB,CAAGA,CAAA,GAAM,CAChCpC,iBAAiB,CAAC,KAAK,CAAC,CACxBE,gBAAgB,CAAC,IAAI,CAAC,CACtB;AACAd,QAAQ,CAACtB,mBAAmB,CAAC,CAAEyC,SAAS,CAAEpB,EAAG,CAAC,CAAC,CAAC,CAChDC,QAAQ,CAAC3B,YAAY,CAAC0B,EAAE,CAAC,CAAC,CAAE;AAE5B;AACAhB,KAAK,CAACkE,OAAO,CAAC,4BAA4B,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CAAC5C,eAAe,CAAE,CACpBvB,KAAK,CAACqC,KAAK,CAAC,mCAAmC,CAAC,CAChD,OACF,CAEA,GAAI,CACF,KAAM,CAAApB,QAAQ,CAACxB,eAAe,CAAC,CAAE2C,SAAS,CAAElB,cAAc,CAAC0C,GAAG,CAAElC,QAAS,CAAC,CAAC,CAAC,CAC5E1B,KAAK,CAACkE,OAAO,CAAC,uBAAuB,CAAC,CACxC,CAAE,MAAO7B,KAAK,CAAE,CACdrC,KAAK,CAACqC,KAAK,CAAC,+BAA+B,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAA+B,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CAAC7C,eAAe,CAAE,CACpBvB,KAAK,CAACqC,KAAK,CAAC,uCAAuC,CAAC,CACpD,OACF,CAEA,GAAI,CACF,KAAM,CAAApB,QAAQ,CAACvB,mBAAmB,CAACwB,cAAc,CAAC0C,GAAG,CAAC,CAAC,CACvD5D,KAAK,CAACkE,OAAO,CAAC,2BAA2B,CAAC,CAC5C,CAAE,MAAO7B,KAAK,CAAE,CACdrC,KAAK,CAACqC,KAAK,CAAC,mCAAmC,CAAC,CAClD,CACF,CAAC,CAED,GAAIjB,OAAO,CAAE,CACX,mBAAOlB,IAAA,CAACN,cAAc,EAACyE,IAAI,CAAC,IAAI,CAACC,SAAS,CAAC,cAAc,CAAE,CAAC,CAC9D,CAEA,GAAI,CAACpD,cAAc,CAAE,CACnB,mBACEhB,IAAA,QAAKoE,SAAS,CAAC,+CAA+C,CAAAC,QAAA,cAC5DnE,KAAA,QAAKkE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BrE,IAAA,OAAIoE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC5ErE,IAAA,MAAGoE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,+CAA6C,CAAG,CAAC,EAC3E,CAAC,CACH,CAAC,CAEV,CAEA,mBACEnE,KAAA,QAAKkE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCnE,KAAA,CAACtB,MAAM,EAAAyF,QAAA,eACLnE,KAAA,UAAAmE,QAAA,EAAQrD,cAAc,CAACsD,IAAI,CAAC,gCAA8B,EAAO,CAAC,cAClEtE,IAAA,SAAMsE,IAAI,CAAC,aAAa,CAACC,OAAO,CAAEvD,cAAc,CAACwD,WAAY,CAAE,CAAC,EAC1D,CAAC,cAETtE,KAAA,QAAKkE,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAC1DnE,KAAA,QAAKkE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eAErDnE,KAAA,QAAKkE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBrE,IAAA,QAAKoE,SAAS,CAAC,8DAA8D,CAAAC,QAAA,cAC3ErE,IAAA,QACEyE,GAAG,CAAE,EAAArE,qBAAA,CAAAY,cAAc,CAAC0D,MAAM,UAAAtE,qBAAA,kBAAAC,sBAAA,CAArBD,qBAAA,CAAwB,CAAC,CAAC,UAAAC,sBAAA,iBAA1BA,sBAAA,CAA4BsE,GAAG,GAAI,0BAA2B,CACnEC,GAAG,CAAE5D,cAAc,CAACsD,IAAK,CACzBF,SAAS,CAAC,0BAA0B,CACrC,CAAC,CACC,CAAC,CACL,EAAA9D,sBAAA,CAAAU,cAAc,CAAC0D,MAAM,UAAApE,sBAAA,iBAArBA,sBAAA,CAAuBuE,MAAM,EAAG,CAAC,eAChC7E,IAAA,QAAKoE,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpCrD,cAAc,CAAC0D,MAAM,CAACI,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACC,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBAClDjF,IAAA,QAAiBoE,SAAS,CAAC,8DAA8D,CAAAC,QAAA,cACvFrE,IAAA,QACEyE,GAAG,CAAEO,KAAK,CAACL,GAAI,CACfC,GAAG,IAAAhC,MAAA,CAAK5B,cAAc,CAACsD,IAAI,MAAA1B,MAAA,CAAIqC,KAAK,CAAG,CAAC,CAAG,CAC3Cb,SAAS,CAAC,0BAA0B,CACrC,CAAC,EALMa,KAML,CACN,CAAC,CACC,CACN,EACE,CAAC,cAGN/E,KAAA,QAAKkE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnE,KAAA,QAAAmE,QAAA,eACErE,IAAA,OAAIoE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAClDrD,cAAc,CAACsD,IAAI,CAClB,CAAC,cACLpE,KAAA,QAAKkE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CnE,KAAA,QAAKkE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrE,IAAA,QAAKoE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/B,CAAC,GAAGa,KAAK,CAAC,CAAC,CAAC,CAAC,CAACH,GAAG,CAAC,CAACI,CAAC,CAAEC,CAAC,QAAAC,qBAAA,oBACtBrF,IAAA,CAACjB,QAAQ,EAEPqF,SAAS,YAAAxB,MAAA,CACPwC,CAAC,CAAGE,IAAI,CAACC,KAAK,CAAC,EAAAF,qBAAA,CAAArE,cAAc,CAACwE,OAAO,UAAAH,qBAAA,iBAAtBA,qBAAA,CAAwBI,OAAO,GAAI,CAAC,CAAC,CAChD,iBAAiB,CACjB,eAAe,CAClB,CACHC,IAAI,CAAC,cAAc,EANdN,CAON,CAAC,EACH,CAAC,CACC,CAAC,cACNpF,IAAA,SAAMoE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAClD,EAAA9D,sBAAA,CAAAS,cAAc,CAACwE,OAAO,UAAAjF,sBAAA,kBAAAC,sBAAA,CAAtBD,sBAAA,CAAwBkF,OAAO,UAAAjF,sBAAA,iBAA/BA,sBAAA,CAAiCmF,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CACjD,CAAC,cACPzF,KAAA,SAAMkE,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,GAC7B,CAAC,EAAA5D,sBAAA,CAAAO,cAAc,CAACwE,OAAO,UAAA/E,sBAAA,iBAAtBA,sBAAA,CAAwBmF,KAAK,GAAI,CAAC,CAAC,WACvC,EAAM,CAAC,EACJ,CAAC,CACL5E,cAAc,CAAC6E,UAAU,eACxB7F,IAAA,SAAMoE,SAAS,CAAC,0DAA0D,CAAAC,QAAA,CAAC,UAE3E,CAAM,CACP,EACE,CAAC,EACH,CAAC,cAENnE,KAAA,QAAKkE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CnE,KAAA,SAAMkE,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAAC,QACnD,CAACrD,cAAc,CAAC8E,KAAK,EAClB,CAAC,CACN9E,cAAc,CAAC+E,aAAa,EAAI/E,cAAc,CAAC+E,aAAa,CAAG/E,cAAc,CAAC8E,KAAK,eAClF5F,KAAA,SAAMkE,SAAS,CAAC,oCAAoC,CAAAC,QAAA,EAAC,QAClD,CAACrD,cAAc,CAAC+E,aAAa,EAC1B,CACP,EACE,CAAC,cAEN7F,KAAA,QAAKkE,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BnE,KAAA,MAAGkE,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBrE,IAAA,SAAMoE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,IAAC,CAACrD,cAAc,CAACgF,GAAG,EAC5D,CAAC,cACJ9F,KAAA,MAAGkE,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBrE,IAAA,SAAMoE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,IAAC,EAAA3D,qBAAA,CAACM,cAAc,CAACiF,QAAQ,UAAAvF,qBAAA,iBAAvBA,qBAAA,CAAyB4D,IAAI,EAC5E,CAAC,cACJpE,KAAA,MAAGkE,SAAS,CAAC,SAAS,CAAAC,QAAA,eACpBrE,IAAA,SAAMoE,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,IAAC,CAACrD,cAAc,CAACkF,KAAK,CAAG,CAAC,IAAAtD,MAAA,CAAM5B,cAAc,CAACkF,KAAK,eAAe,cAAc,EAC3H,CAAC,EACD,CAAC,cAENhG,KAAA,QAAKkE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnE,KAAA,QAAAmE,QAAA,eACErE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cACzErE,IAAA,MAAGoE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAErD,cAAc,CAACwD,WAAW,CAAI,CAAC,EAC1D,CAAC,CAELxD,cAAc,CAACmF,QAAQ,eACtBjG,KAAA,QAAAmE,QAAA,eACErE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cACtErE,IAAA,MAAGoE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAErD,cAAc,CAACmF,QAAQ,CAAI,CAAC,EACvD,CACN,CAEAnF,cAAc,CAACoF,KAAK,eACnBlG,KAAA,QAAAmE,QAAA,eACErE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cACnErE,IAAA,MAAGoE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAErD,cAAc,CAACoF,KAAK,CAAI,CAAC,EACpD,CACN,EACE,CAAC,cAGNlG,KAAA,QAAKkE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBnE,KAAA,QAAKkE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrE,IAAA,SAAMoE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,WAAS,CAAM,CAAC,cACpEnE,KAAA,QAAKkE,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClErE,IAAA,WACEqG,OAAO,CAAEA,CAAA,GAAM5E,WAAW,CAAC6D,IAAI,CAACgB,GAAG,CAAC,CAAC,CAAE9E,QAAQ,CAAG,CAAC,CAAC,CAAE,CACtD4C,SAAS,CAAC,uBAAuB,CACjCmC,QAAQ,CAAE/E,QAAQ,EAAI,CAAE,CAAA6C,QAAA,cAExBrE,IAAA,CAACd,SAAS,EAACkF,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,cACTpE,IAAA,SAAMoE,SAAS,CAAC,6DAA6D,CAAAC,QAAA,CAC1E7C,QAAQ,CACL,CAAC,cACPxB,IAAA,WACEqG,OAAO,CAAEA,CAAA,GAAM5E,WAAW,CAAC6D,IAAI,CAACkB,GAAG,CAACxF,cAAc,CAACkF,KAAK,CAAE1E,QAAQ,CAAG,CAAC,CAAC,CAAE,CACzE4C,SAAS,CAAC,uBAAuB,CACjCmC,QAAQ,CAAE/E,QAAQ,EAAIR,cAAc,CAACkF,KAAM,CAAA7B,QAAA,cAE3CrE,IAAA,CAACb,QAAQ,EAACiF,SAAS,CAAC,SAAS,CAAE,CAAC,CAC1B,CAAC,EACN,CAAC,EACH,CAAC,cAENlE,KAAA,QAAKkE,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnE,KAAA,CAACP,MAAM,EACL0G,OAAO,CAAEpC,eAAgB,CACzBsC,QAAQ,CAAEvF,cAAc,CAACkF,KAAK,GAAK,CAAE,CACrC9B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eAElBrE,IAAA,CAACf,gBAAgB,EAACmF,SAAS,CAAC,cAAc,CAAE,CAAC,cAE/C,EAAQ,CAAC,cACTpE,IAAA,CAACL,MAAM,EACL8G,OAAO,CAAC,SAAS,CACjBJ,OAAO,CAAEnC,mBAAoB,CAC7BE,SAAS,CAAC,MAAM,CAAAC,QAAA,cAEhBrE,IAAA,CAAChB,SAAS,EAACoF,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,cAGNlE,KAAA,QAAKkE,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBrE,IAAA,OAAIoE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,qBAAmB,CAAI,CAAC,cAC9EnE,KAAA,QAAKkE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BrE,IAAA,MAAGoE,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CACzCrD,cAAc,CAACwD,WAAW,CAC1B,CAAC,CACHxD,cAAc,CAAC0F,gBAAgB,eAC9BxG,KAAA,QAAKkE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBrE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC1ErE,IAAA,MAAGoE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAErD,cAAc,CAAC0F,gBAAgB,CAAI,CAAC,EAC/D,CACN,EACE,CAAC,EACH,CAAC,cAGNxG,KAAA,QAAKkE,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBnE,KAAA,QAAKkE,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDrE,IAAA,OAAIoE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,kBAEjD,CAAI,CAAC,cACLrE,IAAA,QAAKoE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,cAC1CnE,KAAA,QAAKkE,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CrE,IAAA,QAAKoE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/B,CAAC,GAAGa,KAAK,CAAC,CAAC,CAAC,CAAC,CAACH,GAAG,CAAC,CAACI,CAAC,CAAEC,CAAC,QAAAuB,sBAAA,oBACtB3G,IAAA,CAACjB,QAAQ,EAEPqF,SAAS,YAAAxB,MAAA,CACPwC,CAAC,CAAGE,IAAI,CAACC,KAAK,CAAC,EAAAoB,sBAAA,CAAA3F,cAAc,CAACwE,OAAO,UAAAmB,sBAAA,iBAAtBA,sBAAA,CAAwBlB,OAAO,GAAI,CAAC,CAAC,CAChD,iBAAiB,CACjB,eAAe,CAClB,CACHC,IAAI,CAAC,cAAc,EANdN,CAON,CAAC,EACH,CAAC,CACC,CAAC,cACNlF,KAAA,QAAKkE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBrE,IAAA,QAAKoE,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC9C,EAAA1D,sBAAA,CAAAK,cAAc,CAACwE,OAAO,UAAA7E,sBAAA,kBAAAC,sBAAA,CAAtBD,sBAAA,CAAwB8E,OAAO,UAAA7E,sBAAA,iBAA/BA,sBAAA,CAAiC+E,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAClD,CAAC,cACNzF,KAAA,QAAKkE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,WAC5B,CAAC,EAAAxD,sBAAA,CAAAG,cAAc,CAACwE,OAAO,UAAA3E,sBAAA,iBAAtBA,sBAAA,CAAwB+E,KAAK,GAAI,CAAC,CAAC,UAC/C,EAAK,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAGLvE,eAAe,EAAIS,cAAc,eAChC9B,IAAA,QAAKoE,SAAS,CAAC,MAAM,CAAAC,QAAA,CAClB,CAAC3C,cAAc,cACdxB,KAAA,QAAKkE,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjFrE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,uBAEzD,CAAI,CAAC,cACLrE,IAAA,MAAGoE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,iGAElC,CAAG,CAAC,cACJrE,IAAA,CAACL,MAAM,EAAC0G,OAAO,CAAEA,CAAA,GAAM1E,iBAAiB,CAAC,IAAI,CAAE,CAAA0C,QAAA,CAAC,gBAEhD,CAAQ,CAAC,EACN,CAAC,cAENrE,IAAA,CAACH,UAAU,EACTqC,SAAS,CAAElB,cAAc,CAAC0C,GAAI,CAC9BkD,OAAO,CAAE,IAAK,CACdC,cAAc,CAAEjF,aAAc,CAC9BkF,SAAS,CAAE/C,mBAAoB,CAC/BgD,QAAQ,CAAEA,CAAA,GAAM,CACdpF,iBAAiB,CAAC,KAAK,CAAC,CACxBE,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAE,CACH,CACF,CACE,CACN,CAGAR,eAAe,EAAI,CAACS,cAAc,eACjC9B,IAAA,QAAKoE,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBnE,KAAA,QAAKkE,SAAS,CAAC,+EAA+E,CAAAC,QAAA,eAC5FrE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,gBAEzD,CAAI,CAAC,cACLrE,IAAA,MAAGoE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,uFAElC,CAAG,CAAC,cACJrE,IAAA,MAAGoE,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,sEAErC,CAAG,CAAC,EACD,CAAC,CACH,CACN,CAGA,CAAChD,eAAe,eACfrB,IAAA,QAAKoE,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBnE,KAAA,QAAKkE,SAAS,CAAC,+EAA+E,CAAAC,QAAA,eAC5FrE,IAAA,OAAIoE,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,gBAEzD,CAAI,CAAC,cACLrE,IAAA,MAAGoE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,mDAElC,CAAG,CAAC,cACJrE,IAAA,CAACrB,IAAI,EAACqI,EAAE,CAAC,QAAQ,CAAA3C,QAAA,cACfrE,IAAA,CAACL,MAAM,EAAA0E,QAAA,CAAC,QAAM,CAAQ,CAAC,CACnB,CAAC,EACJ,CAAC,CACH,CACN,cAGDrE,IAAA,CAACJ,UAAU,EACTsC,SAAS,CAAElB,cAAc,CAAC0C,GAAI,CAC9BuD,YAAY,CAAErD,gBAAiB,CAC/BsD,cAAc,CAAEpD,kBAAmB,CACpC,CAAC,EACC,CAAC,CAGL7C,eAAe,EAAIA,eAAe,CAAC4D,MAAM,CAAG,CAAC,eAC5C3E,KAAA,QAAKkE,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBrE,IAAA,OAAIoE,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAC3ErE,IAAA,QAAKoE,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAClEpD,eAAe,CAAC8D,GAAG,CAAEtB,OAAO,OAAA0D,eAAA,CAAAC,gBAAA,oBAC3BlH,KAAA,QAAuBkE,SAAS,CAAC,kHAAkH,CAAAC,QAAA,eACjJrE,IAAA,QAAKoE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAChDrE,IAAA,QACEyE,GAAG,CAAE,EAAA0C,eAAA,CAAA1D,OAAO,CAACiB,MAAM,UAAAyC,eAAA,kBAAAC,gBAAA,CAAdD,eAAA,CAAiB,CAAC,CAAC,UAAAC,gBAAA,iBAAnBA,gBAAA,CAAqBzC,GAAG,GAAI,0BAA2B,CAC5DC,GAAG,CAAEnB,OAAO,CAACa,IAAK,CAClBF,SAAS,CAAC,0BAA0B,CACrC,CAAC,CACC,CAAC,cACNlE,KAAA,QAAKkE,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBrE,IAAA,OAAIoE,SAAS,CAAC,uDAAuD,CAAAC,QAAA,CAClEZ,OAAO,CAACa,IAAI,CACX,CAAC,cACLpE,KAAA,QAAKkE,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChDnE,KAAA,SAAMkE,SAAS,CAAC,oCAAoC,CAAAC,QAAA,EAAC,QAClD,CAACZ,OAAO,CAACqC,KAAK,EACX,CAAC,cACP9F,IAAA,MACEqH,IAAI,cAAAzE,MAAA,CAAea,OAAO,CAACC,GAAG,CAAG,CACjCU,SAAS,CAAC,6DAA6D,CAAAC,QAAA,CACxE,cAED,CAAG,CAAC,EACD,CAAC,EACH,CAAC,GAvBEZ,OAAO,CAACC,GAwBb,CAAC,EACP,CAAC,CACC,CAAC,EACH,CACN,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}