{"ast":null,"code":"import _objectSpread from\"E:/blowpack/frountend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{createReview,updateReview}from'../../store/slices/reviewSlice';import StarRating from'../common/StarRating';import Button from'../common/Button';import Input from'../common/Input';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewForm=_ref=>{let{productId,orderId,existingReview=null,onSuccess=null,onCancel=null}=_ref;const dispatch=useDispatch();const{loading}=useSelector(state=>state.reviews);const[formData,setFormData]=useState({rating:(existingReview===null||existingReview===void 0?void 0:existingReview.rating)||0,title:(existingReview===null||existingReview===void 0?void 0:existingReview.title)||'',comment:(existingReview===null||existingReview===void 0?void 0:existingReview.comment)||''});const[errors,setErrors]=useState({});const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const handleRatingChange=rating=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{rating}));if(errors.rating){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{rating:''}));}};const validateForm=()=>{const newErrors={};if(formData.rating<1){newErrors.rating='Please select a rating';}if(!formData.title.trim()){newErrors.title='Review title is required';}else if(formData.title.trim().length<5){newErrors.title='Title must be at least 5 characters';}else if(formData.title.trim().length>100){newErrors.title='Title cannot exceed 100 characters';}if(!formData.comment.trim()){newErrors.comment='Review comment is required';}else if(formData.comment.trim().length<10){newErrors.comment='Comment must be at least 10 characters';}else if(formData.comment.trim().length>500){newErrors.comment='Comment cannot exceed 500 characters';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{const reviewData={productId,orderId,rating:formData.rating,title:formData.title.trim(),comment:formData.comment.trim()};if(existingReview){await dispatch(updateReview({reviewId:existingReview._id,reviewData}));toast.success('Review updated successfully');}else{await dispatch(createReview(reviewData));toast.success('Review created successfully');}if(onSuccess){onSuccess();}}catch(error){toast.error('Failed to save review');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:existingReview?'Edit Review':'Write a Review'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Rating *\"}),/*#__PURE__*/_jsx(StarRating,{rating:formData.rating,interactive:true,onRatingChange:handleRatingChange,size:\"lg\",showNumber:true}),errors.rating&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:errors.rating})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Input,{label:\"Review Title\",name:\"title\",value:formData.title,onChange:handleInputChange,placeholder:\"Give your review a title\",error:errors.title,required:true})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Your Review *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"comment\",value:formData.comment,onChange:handleInputChange,placeholder:\"Share your experience with this product\",rows:4,className:\"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 \".concat(errors.comment?'border-red-300':'border-gray-300')}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mt-1\",children:errors.comment?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600\",children:errors.comment}):/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[formData.comment.length,\"/500 characters\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[onCancel&&/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:onCancel,disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",loading:loading,disabled:loading||formData.rating<1,children:existingReview?'Update Review':'Submit Review'})]})]})]});};export default ReviewForm;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","createReview","updateReview","StarRating","Button","Input","toast","jsx","_jsx","jsxs","_jsxs","ReviewForm","_ref","productId","orderId","existingReview","onSuccess","onCancel","dispatch","loading","state","reviews","formData","setFormData","rating","title","comment","errors","setErrors","handleInputChange","e","name","value","target","prev","_objectSpread","handleRatingChange","validateForm","newErrors","trim","length","Object","keys","handleSubmit","preventDefault","reviewData","reviewId","_id","success","error","className","children","onSubmit","interactive","onRatingChange","size","showNumber","label","onChange","placeholder","required","rows","concat","type","variant","onClick","disabled"],"sources":["E:/blowpack/frountend/src/components/reviews/ReviewForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { createReview, updateReview } from '../../store/slices/reviewSlice';\nimport StarRating from '../common/StarRating';\nimport Button from '../common/Button';\nimport Input from '../common/Input';\nimport { toast } from 'react-toastify';\n\nconst ReviewForm = ({ \n  productId, \n  orderId, \n  existingReview = null, \n  onSuccess = null, \n  onCancel = null \n}) => {\n  const dispatch = useDispatch();\n  const { loading } = useSelector(state => state.reviews);\n  \n  const [formData, setFormData] = useState({\n    rating: existingReview?.rating || 0,\n    title: existingReview?.title || '',\n    comment: existingReview?.comment || ''\n  });\n  \n  const [errors, setErrors] = useState({});\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const handleRatingChange = (rating) => {\n    setFormData(prev => ({\n      ...prev,\n      rating\n    }));\n    \n    if (errors.rating) {\n      setErrors(prev => ({\n        ...prev,\n        rating: ''\n      }));\n    }\n  };\n\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (formData.rating < 1) {\n      newErrors.rating = 'Please select a rating';\n    }\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Review title is required';\n    } else if (formData.title.trim().length < 5) {\n      newErrors.title = 'Title must be at least 5 characters';\n    } else if (formData.title.trim().length > 100) {\n      newErrors.title = 'Title cannot exceed 100 characters';\n    }\n    \n    if (!formData.comment.trim()) {\n      newErrors.comment = 'Review comment is required';\n    } else if (formData.comment.trim().length < 10) {\n      newErrors.comment = 'Comment must be at least 10 characters';\n    } else if (formData.comment.trim().length > 500) {\n      newErrors.comment = 'Comment cannot exceed 500 characters';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      const reviewData = {\n        productId,\n        orderId,\n        rating: formData.rating,\n        title: formData.title.trim(),\n        comment: formData.comment.trim()\n      };\n\n      if (existingReview) {\n        await dispatch(updateReview({ \n          reviewId: existingReview._id, \n          reviewData \n        }));\n        toast.success('Review updated successfully');\n      } else {\n        await dispatch(createReview(reviewData));\n        toast.success('Review created successfully');\n      }\n      \n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (error) {\n      toast.error('Failed to save review');\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n        {existingReview ? 'Edit Review' : 'Write a Review'}\n      </h3>\n      \n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* Rating */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Rating *\n          </label>\n          <StarRating\n            rating={formData.rating}\n            interactive={true}\n            onRatingChange={handleRatingChange}\n            size=\"lg\"\n            showNumber={true}\n          />\n          {errors.rating && (\n            <p className=\"mt-1 text-sm text-red-600\">{errors.rating}</p>\n          )}\n        </div>\n\n        {/* Title */}\n        <div>\n          <Input\n            label=\"Review Title\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleInputChange}\n            placeholder=\"Give your review a title\"\n            error={errors.title}\n            required\n          />\n        </div>\n\n        {/* Comment */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Your Review *\n          </label>\n          <textarea\n            name=\"comment\"\n            value={formData.comment}\n            onChange={handleInputChange}\n            placeholder=\"Share your experience with this product\"\n            rows={4}\n            className={`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${\n              errors.comment ? 'border-red-300' : 'border-gray-300'\n            }`}\n          />\n          <div className=\"flex justify-between items-center mt-1\">\n            {errors.comment ? (\n              <p className=\"text-sm text-red-600\">{errors.comment}</p>\n            ) : (\n              <p className=\"text-sm text-gray-500\">\n                {formData.comment.length}/500 characters\n              </p>\n            )}\n          </div>\n        </div>\n\n\n        {/* Action Buttons */}\n        <div className=\"flex justify-end space-x-4\">\n          {onCancel && (\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={onCancel}\n              disabled={loading}\n            >\n              Cancel\n            </Button>\n          )}\n          <Button\n            type=\"submit\"\n            loading={loading}\n            disabled={loading || formData.rating < 1}\n          >\n            {existingReview ? 'Update Review' : 'Submit Review'}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ReviewForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}