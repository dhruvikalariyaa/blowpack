{"ast":null,"code":"\"use strict\";\n\n// Copyright 2018 Google LLC\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//    http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Gaxios = void 0;\nconst extend_1 = __importDefault(require(\"extend\"));\nconst https_1 = require(\"https\");\nconst common_js_1 = require(\"./common.js\");\nconst retry_js_1 = require(\"./retry.js\");\nconst stream_1 = require(\"stream\");\nconst interceptor_js_1 = require(\"./interceptor.js\");\nconst randomUUID = async () => globalThis.crypto?.randomUUID() || (await import('crypto')).randomUUID();\nclass Gaxios {\n  agentCache = new Map();\n  /**\n   * Default HTTP options that will be used for every HTTP request.\n   */\n  defaults;\n  /**\n   * Interceptors\n   */\n  interceptors;\n  /**\n   * The Gaxios class is responsible for making HTTP requests.\n   * @param defaults The default set of options to be used for this instance.\n   */\n  constructor(defaults) {\n    this.defaults = defaults || {};\n    this.interceptors = {\n      request: new interceptor_js_1.GaxiosInterceptorManager(),\n      response: new interceptor_js_1.GaxiosInterceptorManager()\n    };\n  }\n  /**\n   * A {@link fetch `fetch`} compliant API for {@link Gaxios}.\n   *\n   * @remarks\n   *\n   * This is useful as a drop-in replacement for `fetch` API usage.\n   *\n   * @example\n   *\n   * ```ts\n   * const gaxios = new Gaxios();\n   * const myFetch: typeof fetch = (...args) => gaxios.fetch(...args);\n   * await myFetch('https://example.com');\n   * ```\n   *\n   * @param args `fetch` API or `Gaxios#request` parameters\n   * @returns the {@link Response} with Gaxios-added properties\n   */\n  fetch(...args) {\n    // Up to 2 parameters in either overload\n    const input = args[0];\n    const init = args[1];\n    let url = undefined;\n    const headers = new Headers();\n    // prepare URL\n    if (typeof input === 'string') {\n      url = new URL(input);\n    } else if (input instanceof URL) {\n      url = input;\n    } else if (input && input.url) {\n      url = new URL(input.url);\n    }\n    // prepare headers\n    if (input && typeof input === 'object' && 'headers' in input) {\n      _a.mergeHeaders(headers, input.headers);\n    }\n    if (init) {\n      _a.mergeHeaders(headers, new Headers(init.headers));\n    }\n    // prepare request\n    if (typeof input === 'object' && !(input instanceof URL)) {\n      // input must have been a non-URL object\n      return this.request({\n        ...init,\n        ...input,\n        headers,\n        url\n      });\n    } else {\n      // input must have been a string or URL\n      return this.request({\n        ...init,\n        headers,\n        url\n      });\n    }\n  }\n  /**\n   * Perform an HTTP request with the given options.\n   * @param opts Set of HTTP options that will be used for this HTTP request.\n   */\n  async request(opts = {}) {\n    let prepared = await this.#prepareRequest(opts);\n    prepared = await this.#applyRequestInterceptors(prepared);\n    return this.#applyResponseInterceptors(this._request(prepared));\n  }\n  async _defaultAdapter(config) {\n    const fetchImpl = config.fetchImplementation || this.defaults.fetchImplementation || (await _a.#getFetch());\n    // node-fetch v3 warns when `data` is present\n    // https://github.com/node-fetch/node-fetch/issues/1000\n    const preparedOpts = {\n      ...config\n    };\n    delete preparedOpts.data;\n    const res = await fetchImpl(config.url, preparedOpts);\n    const data = await this.getResponseData(config, res);\n    if (!Object.getOwnPropertyDescriptor(res, 'data')?.configurable) {\n      // Work-around for `node-fetch` v3 as accessing `data` would otherwise throw\n      Object.defineProperties(res, {\n        data: {\n          configurable: true,\n          writable: true,\n          enumerable: true,\n          value: data\n        }\n      });\n    }\n    // Keep object as an instance of `Response`\n    return Object.assign(res, {\n      config,\n      data\n    });\n  }\n  /**\n   * Internal, retryable version of the `request` method.\n   * @param opts Set of HTTP options that will be used for this HTTP request.\n   */\n  async _request(opts) {\n    try {\n      let translatedResponse;\n      if (opts.adapter) {\n        translatedResponse = await opts.adapter(opts, this._defaultAdapter.bind(this));\n      } else {\n        translatedResponse = await this._defaultAdapter(opts);\n      }\n      if (!opts.validateStatus(translatedResponse.status)) {\n        if (opts.responseType === 'stream') {\n          const response = [];\n          for await (const chunk of opts.data ?? []) {\n            response.push(chunk);\n          }\n          translatedResponse.data = response;\n        }\n        const errorInfo = common_js_1.GaxiosError.extractAPIErrorFromResponse(translatedResponse, `Request failed with status code ${translatedResponse.status}`);\n        throw new common_js_1.GaxiosError(errorInfo?.message, opts, translatedResponse, errorInfo);\n      }\n      return translatedResponse;\n    } catch (e) {\n      let err;\n      if (e instanceof common_js_1.GaxiosError) {\n        err = e;\n      } else if (e instanceof Error) {\n        err = new common_js_1.GaxiosError(e.message, opts, undefined, e);\n      } else {\n        err = new common_js_1.GaxiosError('Unexpected Gaxios Error', opts, undefined, e);\n      }\n      const {\n        shouldRetry,\n        config\n      } = await (0, retry_js_1.getRetryConfig)(err);\n      if (shouldRetry && config) {\n        err.config.retryConfig.currentRetryAttempt = config.retryConfig.currentRetryAttempt;\n        // The error's config could be redacted - therefore we only want to\n        // copy the retry state over to the existing config\n        opts.retryConfig = err.config?.retryConfig;\n        // re-prepare timeout for the next request\n        this.#appendTimeoutToSignal(opts);\n        return this._request(opts);\n      }\n      if (opts.errorRedactor) {\n        opts.errorRedactor(err);\n      }\n      throw err;\n    }\n  }\n  async getResponseData(opts, res) {\n    if (opts.maxContentLength && res.headers.has('content-length') && opts.maxContentLength < Number.parseInt(res.headers?.get('content-length') || '')) {\n      throw new common_js_1.GaxiosError(\"Response's `Content-Length` is over the limit.\", opts, Object.assign(res, {\n        config: opts\n      }));\n    }\n    switch (opts.responseType) {\n      case 'stream':\n        return res.body;\n      case 'json':\n        return res.json();\n      case 'arraybuffer':\n        return res.arrayBuffer();\n      case 'blob':\n        return res.blob();\n      case 'text':\n        return res.text();\n      default:\n        return this.getResponseDataFromContentType(res);\n    }\n  }\n  #urlMayUseProxy(url, noProxy = []) {\n    const candidate = new URL(url);\n    const noProxyList = [...noProxy];\n    const noProxyEnvList = (process.env.NO_PROXY ?? process.env.no_proxy)?.split(',') || [];\n    for (const rule of noProxyEnvList) {\n      noProxyList.push(rule.trim());\n    }\n    for (const rule of noProxyList) {\n      // Match regex\n      if (rule instanceof RegExp) {\n        if (rule.test(candidate.toString())) {\n          return false;\n        }\n      }\n      // Match URL\n      else if (rule instanceof URL) {\n        if (rule.origin === candidate.origin) {\n          return false;\n        }\n      }\n      // Match string regex\n      else if (rule.startsWith('*.') || rule.startsWith('.')) {\n        const cleanedRule = rule.replace(/^\\*\\./, '.');\n        if (candidate.hostname.endsWith(cleanedRule)) {\n          return false;\n        }\n      }\n      // Basic string match\n      else if (rule === candidate.origin || rule === candidate.hostname || rule === candidate.href) {\n        return false;\n      }\n    }\n    return true;\n  }\n  /**\n   * Applies the request interceptors. The request interceptors are applied after the\n   * call to prepareRequest is completed.\n   *\n   * @param {GaxiosOptionsPrepared} options The current set of options.\n   *\n   * @returns {Promise<GaxiosOptionsPrepared>} Promise that resolves to the set of options or response after interceptors are applied.\n   */\n  async #applyRequestInterceptors(options) {\n    let promiseChain = Promise.resolve(options);\n    for (const interceptor of this.interceptors.request.values()) {\n      if (interceptor) {\n        promiseChain = promiseChain.then(interceptor.resolved, interceptor.rejected);\n      }\n    }\n    return promiseChain;\n  }\n  /**\n   * Applies the response interceptors. The response interceptors are applied after the\n   * call to request is made.\n   *\n   * @param {GaxiosOptionsPrepared} options The current set of options.\n   *\n   * @returns {Promise<GaxiosOptionsPrepared>} Promise that resolves to the set of options or response after interceptors are applied.\n   */\n  async #applyResponseInterceptors(response) {\n    let promiseChain = Promise.resolve(response);\n    for (const interceptor of this.interceptors.response.values()) {\n      if (interceptor) {\n        promiseChain = promiseChain.then(interceptor.resolved, interceptor.rejected);\n      }\n    }\n    return promiseChain;\n  }\n  /**\n   * Validates the options, merges them with defaults, and prepare request.\n   *\n   * @param options The original options passed from the client.\n   * @returns Prepared options, ready to make a request\n   */\n  async #prepareRequest(options) {\n    // Prepare Headers - copy in order to not mutate the original objects\n    const preparedHeaders = new Headers(this.defaults.headers);\n    _a.mergeHeaders(preparedHeaders, options.headers);\n    // Merge options\n    const opts = (0, extend_1.default)(true, {}, this.defaults, options);\n    if (!opts.url) {\n      throw new Error('URL is required.');\n    }\n    if (opts.baseURL) {\n      opts.url = new URL(opts.url, opts.baseURL);\n    }\n    // don't modify the properties of a default or provided URL\n    opts.url = new URL(opts.url);\n    if (opts.params) {\n      if (opts.paramsSerializer) {\n        let additionalQueryParams = opts.paramsSerializer(opts.params);\n        if (additionalQueryParams.startsWith('?')) {\n          additionalQueryParams = additionalQueryParams.slice(1);\n        }\n        const prefix = opts.url.toString().includes('?') ? '&' : '?';\n        opts.url = opts.url + prefix + additionalQueryParams;\n      } else {\n        const url = opts.url instanceof URL ? opts.url : new URL(opts.url);\n        for (const [key, value] of new URLSearchParams(opts.params)) {\n          url.searchParams.append(key, value);\n        }\n        opts.url = url;\n      }\n    }\n    if (typeof options.maxContentLength === 'number') {\n      opts.size = options.maxContentLength;\n    }\n    if (typeof options.maxRedirects === 'number') {\n      opts.follow = options.maxRedirects;\n    }\n    const shouldDirectlyPassData = typeof opts.data === 'string' || opts.data instanceof ArrayBuffer || opts.data instanceof Blob ||\n    // Node 18 does not have a global `File` object\n    globalThis.File && opts.data instanceof File || opts.data instanceof FormData || opts.data instanceof stream_1.Readable || opts.data instanceof ReadableStream || opts.data instanceof String || opts.data instanceof URLSearchParams || ArrayBuffer.isView(opts.data) ||\n    // `Buffer` (Node.js), `DataView`, `TypedArray`\n    /**\n     * @deprecated `node-fetch` or another third-party's request types\n     */\n    ['Blob', 'File', 'FormData'].includes(opts.data?.constructor?.name || '');\n    if (opts.multipart?.length) {\n      const boundary = await randomUUID();\n      preparedHeaders.set('content-type', `multipart/related; boundary=${boundary}`);\n      opts.body = stream_1.Readable.from(this.getMultipartRequest(opts.multipart, boundary));\n    } else if (shouldDirectlyPassData) {\n      opts.body = opts.data;\n    } else if (typeof opts.data === 'object') {\n      if (preparedHeaders.get('Content-Type') === 'application/x-www-form-urlencoded') {\n        // If www-form-urlencoded content type has been set, but data is\n        // provided as an object, serialize the content\n        opts.body = opts.paramsSerializer ? opts.paramsSerializer(opts.data) : new URLSearchParams(opts.data);\n      } else {\n        if (!preparedHeaders.has('content-type')) {\n          preparedHeaders.set('content-type', 'application/json');\n        }\n        opts.body = JSON.stringify(opts.data);\n      }\n    } else if (opts.data) {\n      opts.body = opts.data;\n    }\n    opts.validateStatus = opts.validateStatus || this.validateStatus;\n    opts.responseType = opts.responseType || 'unknown';\n    if (!preparedHeaders.has('accept') && opts.responseType === 'json') {\n      preparedHeaders.set('accept', 'application/json');\n    }\n    const proxy = opts.proxy || process?.env?.HTTPS_PROXY || process?.env?.https_proxy || process?.env?.HTTP_PROXY || process?.env?.http_proxy;\n    if (opts.agent) {\n      // don't do any of the following options - use the user-provided agent.\n    } else if (proxy && this.#urlMayUseProxy(opts.url, opts.noProxy)) {\n      const HttpsProxyAgent = await _a.#getProxyAgent();\n      if (this.agentCache.has(proxy)) {\n        opts.agent = this.agentCache.get(proxy);\n      } else {\n        opts.agent = new HttpsProxyAgent(proxy, {\n          cert: opts.cert,\n          key: opts.key\n        });\n        this.agentCache.set(proxy, opts.agent);\n      }\n    } else if (opts.cert && opts.key) {\n      // Configure client for mTLS\n      if (this.agentCache.has(opts.key)) {\n        opts.agent = this.agentCache.get(opts.key);\n      } else {\n        opts.agent = new https_1.Agent({\n          cert: opts.cert,\n          key: opts.key\n        });\n        this.agentCache.set(opts.key, opts.agent);\n      }\n    }\n    if (typeof opts.errorRedactor !== 'function' && opts.errorRedactor !== false) {\n      opts.errorRedactor = common_js_1.defaultErrorRedactor;\n    }\n    if (opts.body && !('duplex' in opts)) {\n      /**\n       * required for Node.js and the type isn't available today\n       * @link https://github.com/nodejs/node/issues/46221\n       * @link https://github.com/microsoft/TypeScript-DOM-lib-generator/issues/1483\n       */\n      opts.duplex = 'half';\n    }\n    this.#appendTimeoutToSignal(opts);\n    return Object.assign(opts, {\n      headers: preparedHeaders,\n      url: opts.url instanceof URL ? opts.url : new URL(opts.url)\n    });\n  }\n  #appendTimeoutToSignal(opts) {\n    if (opts.timeout) {\n      const timeoutSignal = AbortSignal.timeout(opts.timeout);\n      if (opts.signal && !opts.signal.aborted) {\n        opts.signal = AbortSignal.any([opts.signal, timeoutSignal]);\n      } else {\n        opts.signal = timeoutSignal;\n      }\n    }\n  }\n  /**\n   * By default, throw for any non-2xx status code\n   * @param status status code from the HTTP response\n   */\n  validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n  /**\n   * Attempts to parse a response by looking at the Content-Type header.\n   * @param {Response} response the HTTP response.\n   * @returns a promise that resolves to the response data.\n   */\n  async getResponseDataFromContentType(response) {\n    let contentType = response.headers.get('Content-Type');\n    if (contentType === null) {\n      // Maintain existing functionality by calling text()\n      return response.text();\n    }\n    contentType = contentType.toLowerCase();\n    if (contentType.includes('application/json')) {\n      let data = await response.text();\n      try {\n        data = JSON.parse(data);\n      } catch {\n        // continue\n      }\n      return data;\n    } else if (contentType.match(/^text\\//)) {\n      return response.text();\n    } else {\n      // If the content type is something not easily handled, just return the raw data (blob)\n      return response.blob();\n    }\n  }\n  /**\n   * Creates an async generator that yields the pieces of a multipart/related request body.\n   * This implementation follows the spec: https://www.ietf.org/rfc/rfc2387.txt. However, recursive\n   * multipart/related requests are not currently supported.\n   *\n   * @param {GaxioMultipartOptions[]} multipartOptions the pieces to turn into a multipart/related body.\n   * @param {string} boundary the boundary string to be placed between each part.\n   */\n  async *getMultipartRequest(multipartOptions, boundary) {\n    const finale = `--${boundary}--`;\n    for (const currentPart of multipartOptions) {\n      const partContentType = currentPart.headers.get('Content-Type') || 'application/octet-stream';\n      const preamble = `--${boundary}\\r\\nContent-Type: ${partContentType}\\r\\n\\r\\n`;\n      yield preamble;\n      if (typeof currentPart.content === 'string') {\n        yield currentPart.content;\n      } else {\n        yield* currentPart.content;\n      }\n      yield '\\r\\n';\n    }\n    yield finale;\n  }\n  /**\n   * A cache for the lazily-loaded proxy agent.\n   *\n   * Should use {@link Gaxios[#getProxyAgent]} to retrieve.\n   */\n  // using `import` to dynamically import the types here\n  static #proxyAgent;\n  /**\n   * A cache for the lazily-loaded fetch library.\n   *\n   * Should use {@link Gaxios[#getFetch]} to retrieve.\n   */\n  //\n  static #fetch;\n  /**\n   * Imports, caches, and returns a proxy agent - if not already imported\n   *\n   * @returns A proxy agent\n   */\n  static async #getProxyAgent() {\n    this.#proxyAgent ||= (await import('https-proxy-agent')).HttpsProxyAgent;\n    return this.#proxyAgent;\n  }\n  static async #getFetch() {\n    const hasWindow = typeof window !== 'undefined' && !!window;\n    this.#fetch ||= hasWindow ? window.fetch : (await import('node-fetch')).default;\n    return this.#fetch;\n  }\n  /**\n   * Merges headers.\n   * If the base headers do not exist a new `Headers` object will be returned.\n   *\n   * @remarks\n   *\n   * Using this utility can be helpful when the headers are not known to exist:\n   * - if they exist as `Headers`, that instance will be used\n   *   - it improves performance and allows users to use their existing references to their `Headers`\n   * - if they exist in another form (`HeadersInit`), they will be used to create a new `Headers` object\n   * - if the base headers do not exist a new `Headers` object will be created\n   *\n   * @param base headers to append/overwrite to\n   * @param append headers to append/overwrite with\n   * @returns the base headers instance with merged `Headers`\n   */\n  static mergeHeaders(base, ...append) {\n    base = base instanceof Headers ? base : new Headers(base);\n    for (const headers of append) {\n      const add = headers instanceof Headers ? headers : new Headers(headers);\n      add.forEach((value, key) => {\n        // set-cookie is the only header that would repeat.\n        // A bit of background: https://developer.mozilla.org/en-US/docs/Web/API/Headers/getSetCookie\n        key === 'set-cookie' ? base.append(key, value) : base.set(key, value);\n      });\n    }\n    return base;\n  }\n}\nexports.Gaxios = Gaxios;\n_a = Gaxios;","map":{"version":3,"names":["extend_1","__importDefault","require","https_1","common_js_1","retry_js_1","stream_1","interceptor_js_1","randomUUID","globalThis","crypto","Gaxios","agentCache","Map","defaults","interceptors","constructor","request","GaxiosInterceptorManager","response","fetch","args","input","init","url","undefined","headers","Headers","URL","_a","mergeHeaders","opts","prepared","prepareRequest","applyRequestInterceptors","applyResponseInterceptors","_request","_defaultAdapter","config","fetchImpl","fetchImplementation","getFetch","preparedOpts","data","res","getResponseData","Object","getOwnPropertyDescriptor","configurable","defineProperties","writable","enumerable","value","assign","translatedResponse","adapter","bind","validateStatus","status","responseType","chunk","push","errorInfo","GaxiosError","extractAPIErrorFromResponse","message","e","err","Error","shouldRetry","getRetryConfig","retryConfig","currentRetryAttempt","appendTimeoutToSignal","errorRedactor","maxContentLength","has","Number","parseInt","get","body","json","arrayBuffer","blob","text","getResponseDataFromContentType","urlMayUseProxy","#urlMayUseProxy","noProxy","candidate","noProxyList","noProxyEnvList","process","env","NO_PROXY","no_proxy","split","rule","trim","RegExp","test","toString","origin","startsWith","cleanedRule","replace","hostname","endsWith","href","#applyRequestInterceptors","options","promiseChain","Promise","resolve","interceptor","values","then","resolved","rejected","#applyResponseInterceptors","#prepareRequest","preparedHeaders","default","baseURL","params","paramsSerializer","additionalQueryParams","slice","prefix","includes","key","URLSearchParams","searchParams","append","size","maxRedirects","follow","shouldDirectlyPassData","ArrayBuffer","Blob","File","FormData","Readable","ReadableStream","String","isView","name","multipart","length","boundary","set","from","getMultipartRequest","JSON","stringify","proxy","HTTPS_PROXY","https_proxy","HTTP_PROXY","http_proxy","agent","HttpsProxyAgent","getProxyAgent","cert","Agent","defaultErrorRedactor","duplex","#appendTimeoutToSignal","timeout","timeoutSignal","AbortSignal","signal","aborted","any","contentType","toLowerCase","parse","match","multipartOptions","finale","currentPart","partContentType","preamble","content","proxyAgent","#getProxyAgent","#getFetch","hasWindow","window","base","add","forEach","exports"],"sources":["../../../src/gaxios.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}