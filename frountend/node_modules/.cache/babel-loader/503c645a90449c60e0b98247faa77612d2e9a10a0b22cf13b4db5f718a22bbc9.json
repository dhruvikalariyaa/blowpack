{"ast":null,"code":"import _objectSpread from\"E:/blowpack/frountend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Helmet}from'react-helmet-async';import{useNavigate}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{clearCart,fetchCart}from'../store/slices/cartSlice';import{API_ENDPOINTS}from'../config/api';import{useApi,useRateLimitHandler}from'../hooks/useApi';import ErrorAlert from'../components/common/ErrorAlert';import{CreditCardIcon,TruckIcon,CheckCircleIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=()=>{const navigate=useNavigate();const dispatch=useDispatch();const{cart}=useSelector(state=>state.cart);const items=(cart===null||cart===void 0?void 0:cart.items)||[];const totalAmount=(cart===null||cart===void 0?void 0:cart.totalPrice)||0;const{user}=useSelector(state=>state.auth);const{loading,error,makeRequest,clearError}=useApi();const{isRateLimited,retryAfter,handleRateLimit,clearRateLimit}=useRateLimitHandler();const[success,setSuccess]=useState(false);const[orderNumber,setOrderNumber]=useState('');// Form state\nconst[formData,setFormData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',phone:(user===null||user===void 0?void 0:user.phone)||'',address:'',city:'',state:'',pincode:'',paymentMethod:'cod',notes:''});const[formErrors,setFormErrors]=useState({});useEffect(()=>{console.log('Checkout useEffect - user:',user,'items:',items,'cart:',cart);if(!user){console.log('No user, redirecting to login');navigate('/login?redirect=/checkout');return;}// Fetch cart if not loaded\nif(!cart||!cart.items){console.log('Cart not loaded, fetching cart');dispatch(fetchCart());return;}if(!items||items.length===0){console.log('No items in cart, redirecting to cart');navigate('/cart');return;}console.log('Checkout page loaded successfully');},[user,items,cart,navigate,dispatch]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));// Clear error when user starts typing\nif(formErrors[name]){setFormErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const errors={};if(!formData.name.trim())errors.name='Name is required';if(!formData.phone.trim())errors.phone='Phone number is required';if(!formData.address.trim())errors.address='Address is required';if(!formData.city.trim())errors.city='City is required';if(!formData.state.trim())errors.state='State is required';if(!formData.pincode.trim())errors.pincode='Pincode is required';// Phone validation\nif(formData.phone&&!/^\\d{10}$/.test(formData.phone.replace(/\\D/g,''))){errors.phone='Please enter a valid 10-digit phone number';}// Pincode validation\nif(formData.pincode&&!/^\\d{6}$/.test(formData.pincode)){errors.pincode='Please enter a valid 6-digit pincode';}setFormErrors(errors);return Object.keys(errors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}try{const token=localStorage.getItem('token');if(!token){throw new Error('Please login first');}const orderData={items:(items||[]).map(item=>{var _item$product$images,_item$product$images$;return{product:item.product._id,name:item.product.name,price:item.product.price,quantity:item.quantity,image:((_item$product$images=item.product.images)===null||_item$product$images===void 0?void 0:(_item$product$images$=_item$product$images[0])===null||_item$product$images$===void 0?void 0:_item$product$images$.url)||''};}),shippingAddress:{name:formData.name,phone:formData.phone,address:formData.address,city:formData.city,state:formData.state,pincode:formData.pincode},paymentMethod:formData.paymentMethod,notes:formData.notes};const result=await makeRequest(async()=>{const response=await fetch(API_ENDPOINTS.ORDERS,{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(orderData)});if(!response.ok){const errorData=await response.json();const error=new Error(errorData.message||'Failed to place order');error.response=response;throw error;}return response.json();},{onError:error=>{handleRateLimit(error);}});// Clear cart\ndispatch(clearCart());// Set success state\nsetSuccess(true);setOrderNumber(result.data.order.orderNumber);// Redirect to order confirmation after 3 seconds\nsetTimeout(()=>{navigate(\"/orders/\".concat(result.data.order._id));},3000);}catch(err){// Error is already handled by useApi hook\nconsole.error('Order submission error:',err);}};const calculateShipping=()=>{return(totalAmount||0)>=500?0:50;};const shippingCharges=calculateShipping();const finalTotal=(totalAmount||0)+shippingCharges;if(success){return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Order Confirmed - Blow Pack Plastic Industries\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto text-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"mx-auto h-16 w-16 text-green-500 mb-4\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Order Confirmed!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Your order has been placed successfully.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold text-blue-600 mb-4\",children:[\"Order Number: \",orderNumber]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"You will receive a confirmation email shortly.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Redirecting to order details...\"})]})]});}// Loading state\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Processing your order...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Checkout - Blow Pack Plastic Industries\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 mb-4\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug Info:\"}),\" User: \",user?'Logged in':'Not logged in',\", Items: \",items.length,\", Cart: \",cart?'Loaded':'Not loaded']})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-6\",children:\"Checkout\"}),/*#__PURE__*/_jsx(ErrorAlert,{error:error,onRetry:()=>{clearError();clearRateLimit();handleSubmit({preventDefault:()=>{}});},onDismiss:clearError,isRateLimited:isRateLimited,className:\"mb-6\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Shipping Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(formErrors.name?'border-red-300':'border-gray-300'),placeholder:\"Enter your full name\"}),formErrors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formErrors.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone Number *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:formData.phone,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(formErrors.phone?'border-red-300':'border-gray-300'),placeholder:\"Enter your phone number\"}),formErrors.phone&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formErrors.phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Address *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"address\",value:formData.address,onChange:handleInputChange,rows:3,className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(formErrors.address?'border-red-300':'border-gray-300'),placeholder:\"Enter your complete address\"}),formErrors.address&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formErrors.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",value:formData.city,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(formErrors.city?'border-red-300':'border-gray-300'),placeholder:\"City\"}),formErrors.city&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formErrors.city})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"State *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"state\",value:formData.state,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(formErrors.state?'border-red-300':'border-gray-300'),placeholder:\"State\"}),formErrors.state&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formErrors.state})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Pincode *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"pincode\",value:formData.pincode,onChange:handleInputChange,className:\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(formErrors.pincode?'border-red-300':'border-gray-300'),placeholder:\"Pincode\"}),formErrors.pincode&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:formErrors.pincode})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-3 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"cod\",checked:formData.paymentMethod==='cod',onChange:handleInputChange,className:\"h-4 w-4 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3 flex items-center\",children:[/*#__PURE__*/_jsx(TruckIcon,{className:\"h-5 w-5 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Cash on Delivery\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-3 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentMethod\",value:\"online\",checked:formData.paymentMethod==='online',onChange:handleInputChange,className:\"h-4 w-4 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3 flex items-center\",children:[/*#__PURE__*/_jsx(CreditCardIcon,{className:\"h-5 w-5 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Online Payment (Coming Soon)\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Order Notes (Optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"notes\",value:formData.notes,onChange:handleInputChange,rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Any special instructions for your order...\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||isRateLimited,className:\"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Placing Order...':isRateLimited?'Please Wait...':\"Place Order - \\u20B9\".concat(finalTotal)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:items&&items.length>0?items.map(item=>{var _item$product$images2,_item$product$images3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"img\",{src:((_item$product$images2=item.product.images)===null||_item$product$images2===void 0?void 0:(_item$product$images3=_item$product$images2[0])===null||_item$product$images3===void 0?void 0:_item$product$images3.url)||'/placeholder-product.svg',alt:item.product.name,className:\"h-16 w-16 object-cover rounded-md\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 truncate\",children:item.product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Qty: \",item.quantity]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[\"\\u20B9\",item.product.price*item.quantity]})]},item.product._id);}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No items in cart\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-4 mt-4 space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-900\",children:[\"\\u20B9\",totalAmount||0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Shipping\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:shippingCharges===0?'Free':\"\\u20B9\".concat(shippingCharges)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-lg font-medium\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-900\",children:[\"\\u20B9\",finalTotal]})]})]}),shippingCharges===0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-green-50 border border-green-200 rounded-md\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-800\",children:\"\\uD83C\\uDF89 You qualify for free shipping!\"})})]})]})})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useEffect","Helmet","useNavigate","useSelector","useDispatch","clearCart","fetchCart","API_ENDPOINTS","useApi","useRateLimitHandler","ErrorAlert","CreditCardIcon","TruckIcon","CheckCircleIcon","ExclamationTriangleIcon","jsx","_jsx","jsxs","_jsxs","Checkout","navigate","dispatch","cart","state","items","totalAmount","totalPrice","user","auth","loading","error","makeRequest","clearError","isRateLimited","retryAfter","handleRateLimit","clearRateLimit","success","setSuccess","orderNumber","setOrderNumber","formData","setFormData","name","phone","address","city","pincode","paymentMethod","notes","formErrors","setFormErrors","console","log","length","handleInputChange","e","value","target","prev","_objectSpread","validateForm","errors","trim","test","replace","Object","keys","handleSubmit","preventDefault","token","localStorage","getItem","Error","orderData","map","item","_item$product$images","_item$product$images$","product","_id","price","quantity","image","images","url","shippingAddress","result","response","fetch","ORDERS","method","headers","concat","body","JSON","stringify","ok","errorData","json","message","onError","data","order","setTimeout","err","calculateShipping","shippingCharges","finalTotal","className","children","onRetry","onDismiss","onSubmit","type","onChange","placeholder","rows","checked","disabled","_item$product$images2","_item$product$images3","src","alt"],"sources":["E:/blowpack/frountend/src/pages/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clearCart, fetchCart } from '../store/slices/cartSlice';\nimport { API_ENDPOINTS } from '../config/api';\nimport { useApi, useRateLimitHandler } from '../hooks/useApi';\nimport ErrorAlert from '../components/common/ErrorAlert';\nimport {\n  CreditCardIcon,\n  TruckIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\n\nconst Checkout = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { cart } = useSelector(state => state.cart);\n  const items = cart?.items || [];\n  const totalAmount = cart?.totalPrice || 0;\n  const { user } = useSelector(state => state.auth);\n\n  const { loading, error, makeRequest, clearError } = useApi();\n  const { isRateLimited, retryAfter, handleRateLimit, clearRateLimit } = useRateLimitHandler();\n  \n  const [success, setSuccess] = useState(false);\n  const [orderNumber, setOrderNumber] = useState('');\n\n  // Form state\n  const [formData, setFormData] = useState({\n    name: user?.name || '',\n    phone: user?.phone || '',\n    address: '',\n    city: '',\n    state: '',\n    pincode: '',\n    paymentMethod: 'cod',\n    notes: ''\n  });\n\n  const [formErrors, setFormErrors] = useState({});\n\n  useEffect(() => {\n    console.log('Checkout useEffect - user:', user, 'items:', items, 'cart:', cart);\n    \n    if (!user) {\n      console.log('No user, redirecting to login');\n      navigate('/login?redirect=/checkout');\n      return;\n    }\n\n    // Fetch cart if not loaded\n    if (!cart || !cart.items) {\n      console.log('Cart not loaded, fetching cart');\n      dispatch(fetchCart());\n      return;\n    }\n\n    if (!items || items.length === 0) {\n      console.log('No items in cart, redirecting to cart');\n      navigate('/cart');\n      return;\n    }\n    \n    console.log('Checkout page loaded successfully');\n  }, [user, items, cart, navigate, dispatch]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Clear error when user starts typing\n    if (formErrors[name]) {\n      setFormErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const errors = {};\n\n    if (!formData.name.trim()) errors.name = 'Name is required';\n    if (!formData.phone.trim()) errors.phone = 'Phone number is required';\n    if (!formData.address.trim()) errors.address = 'Address is required';\n    if (!formData.city.trim()) errors.city = 'City is required';\n    if (!formData.state.trim()) errors.state = 'State is required';\n    if (!formData.pincode.trim()) errors.pincode = 'Pincode is required';\n\n    // Phone validation\n    if (formData.phone && !/^\\d{10}$/.test(formData.phone.replace(/\\D/g, ''))) {\n      errors.phone = 'Please enter a valid 10-digit phone number';\n    }\n\n    // Pincode validation\n    if (formData.pincode && !/^\\d{6}$/.test(formData.pincode)) {\n      errors.pincode = 'Please enter a valid 6-digit pincode';\n    }\n\n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Please login first');\n      }\n\n      const orderData = {\n        items: (items || []).map(item => ({\n          product: item.product._id,\n          name: item.product.name,\n          price: item.product.price,\n          quantity: item.quantity,\n          image: item.product.images?.[0]?.url || ''\n        })),\n        shippingAddress: {\n          name: formData.name,\n          phone: formData.phone,\n          address: formData.address,\n          city: formData.city,\n          state: formData.state,\n          pincode: formData.pincode\n        },\n        paymentMethod: formData.paymentMethod,\n        notes: formData.notes\n      };\n\n      const result = await makeRequest(async () => {\n        const response = await fetch(API_ENDPOINTS.ORDERS, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(orderData)\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          const error = new Error(errorData.message || 'Failed to place order');\n          error.response = response;\n          throw error;\n        }\n\n        return response.json();\n      }, {\n        onError: (error) => {\n          handleRateLimit(error);\n        }\n      });\n      \n      // Clear cart\n      dispatch(clearCart());\n      \n      // Set success state\n      setSuccess(true);\n      setOrderNumber(result.data.order.orderNumber);\n      \n      // Redirect to order confirmation after 3 seconds\n      setTimeout(() => {\n        navigate(`/orders/${result.data.order._id}`);\n      }, 3000);\n\n    } catch (err) {\n      // Error is already handled by useApi hook\n      console.error('Order submission error:', err);\n    }\n  };\n\n  const calculateShipping = () => {\n    return (totalAmount || 0) >= 500 ? 0 : 50;\n  };\n\n  const shippingCharges = calculateShipping();\n  const finalTotal = (totalAmount || 0) + shippingCharges;\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <Helmet>\n          <title>Order Confirmed - Blow Pack Plastic Industries</title>\n        </Helmet>\n        <div className=\"max-w-md mx-auto text-center\">\n          <CheckCircleIcon className=\"mx-auto h-16 w-16 text-green-500 mb-4\" />\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Order Confirmed!</h1>\n          <p className=\"text-gray-600 mb-4\">\n            Your order has been placed successfully.\n          </p>\n          <p className=\"text-lg font-semibold text-blue-600 mb-4\">\n            Order Number: {orderNumber}\n          </p>\n          <p className=\"text-sm text-gray-500\">\n            You will receive a confirmation email shortly.\n          </p>\n          <p className=\"text-sm text-gray-500 mt-2\">\n            Redirecting to order details...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Processing your order...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Helmet>\n        <title>Checkout - Blow Pack Plastic Industries</title>\n      </Helmet>\n      \n      {/* Debug Info */}\n      <div className=\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 mb-4\">\n        <p><strong>Debug Info:</strong> User: {user ? 'Logged in' : 'Not logged in'}, Items: {items.length}, Cart: {cart ? 'Loaded' : 'Not loaded'}</p>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Checkout Form */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Checkout</h2>\n\n            <ErrorAlert\n              error={error}\n              onRetry={() => {\n                clearError();\n                clearRateLimit();\n                handleSubmit({ preventDefault: () => {} });\n              }}\n              onDismiss={clearError}\n              isRateLimited={isRateLimited}\n              className=\"mb-6\"\n            />\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Shipping Information */}\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Shipping Information</h3>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Full Name *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      value={formData.name}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                        formErrors.name ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter your full name\"\n                    />\n                    {formErrors.name && (\n                      <p className=\"mt-1 text-sm text-red-600\">{formErrors.name}</p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Phone Number *\n                    </label>\n                    <input\n                      type=\"tel\"\n                      name=\"phone\"\n                      value={formData.phone}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                        formErrors.phone ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Enter your phone number\"\n                    />\n                    {formErrors.phone && (\n                      <p className=\"mt-1 text-sm text-red-600\">{formErrors.phone}</p>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"mt-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Address *\n                  </label>\n                  <textarea\n                    name=\"address\"\n                    value={formData.address}\n                    onChange={handleInputChange}\n                    rows={3}\n                    className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                      formErrors.address ? 'border-red-300' : 'border-gray-300'\n                    }`}\n                    placeholder=\"Enter your complete address\"\n                  />\n                  {formErrors.address && (\n                    <p className=\"mt-1 text-sm text-red-600\">{formErrors.address}</p>\n                  )}\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      City *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"city\"\n                      value={formData.city}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                        formErrors.city ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"City\"\n                    />\n                    {formErrors.city && (\n                      <p className=\"mt-1 text-sm text-red-600\">{formErrors.city}</p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      State *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"state\"\n                      value={formData.state}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                        formErrors.state ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"State\"\n                    />\n                    {formErrors.state && (\n                      <p className=\"mt-1 text-sm text-red-600\">{formErrors.state}</p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Pincode *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"pincode\"\n                      value={formData.pincode}\n                      onChange={handleInputChange}\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                        formErrors.pincode ? 'border-red-300' : 'border-gray-300'\n                      }`}\n                      placeholder=\"Pincode\"\n                    />\n                    {formErrors.pincode && (\n                      <p className=\"mt-1 text-sm text-red-600\">{formErrors.pincode}</p>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Payment Method */}\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Payment Method</h3>\n                \n                <div className=\"space-y-3\">\n                  <label className=\"flex items-center p-3 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50\">\n                    <input\n                      type=\"radio\"\n                      name=\"paymentMethod\"\n                      value=\"cod\"\n                      checked={formData.paymentMethod === 'cod'}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <div className=\"ml-3 flex items-center\">\n                      <TruckIcon className=\"h-5 w-5 text-gray-400 mr-2\" />\n                      <span className=\"text-sm font-medium text-gray-700\">Cash on Delivery</span>\n                    </div>\n                  </label>\n\n                  <label className=\"flex items-center p-3 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50\">\n                    <input\n                      type=\"radio\"\n                      name=\"paymentMethod\"\n                      value=\"online\"\n                      checked={formData.paymentMethod === 'online'}\n                      onChange={handleInputChange}\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <div className=\"ml-3 flex items-center\">\n                      <CreditCardIcon className=\"h-5 w-5 text-gray-400 mr-2\" />\n                      <span className=\"text-sm font-medium text-gray-700\">Online Payment (Coming Soon)</span>\n                    </div>\n                  </label>\n                </div>\n              </div>\n\n              {/* Order Notes */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Order Notes (Optional)\n                </label>\n                <textarea\n                  name=\"notes\"\n                  value={formData.notes}\n                  onChange={handleInputChange}\n                  rows={3}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Any special instructions for your order...\"\n                />\n              </div>\n\n              {/* Submit Button */}\n              <button\n                type=\"submit\"\n                disabled={loading || isRateLimited}\n                className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? 'Placing Order...' : \n                 isRateLimited ? 'Please Wait...' : \n                 `Place Order - ₹${finalTotal}`}\n              </button>\n            </form>\n          </div>\n\n          {/* Order Summary */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Order Summary</h3>\n            \n            <div className=\"space-y-4\">\n              {items && items.length > 0 ? items.map((item) => (\n                <div key={item.product._id} className=\"flex items-center space-x-4\">\n                  <div className=\"flex-shrink-0\">\n                    <img\n                      src={item.product.images?.[0]?.url || '/placeholder-product.svg'}\n                      alt={item.product.name}\n                      className=\"h-16 w-16 object-cover rounded-md\"\n                    />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h4 className=\"text-sm font-medium text-gray-900 truncate\">\n                      {item.product.name}\n                    </h4>\n                    <p className=\"text-sm text-gray-500\">Qty: {item.quantity}</p>\n                  </div>\n                  <div className=\"text-sm font-medium text-gray-900\">\n                    ₹{item.product.price * item.quantity}\n                  </div>\n                </div>\n              )) : (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <p>No items in cart</p>\n                </div>\n              )}\n            </div>\n\n            <div className=\"border-t border-gray-200 pt-4 mt-4 space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-600\">Subtotal</span>\n                <span className=\"text-gray-900\">₹{totalAmount || 0}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-600\">Shipping</span>\n                <span className=\"text-gray-900\">\n                  {shippingCharges === 0 ? 'Free' : `₹${shippingCharges}`}\n                </span>\n              </div>\n              <div className=\"flex justify-between text-lg font-medium\">\n                <span className=\"text-gray-900\">Total</span>\n                <span className=\"text-gray-900\">₹{finalTotal}</span>\n              </div>\n            </div>\n\n            {shippingCharges === 0 && (\n              <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-md\">\n                <p className=\"text-sm text-green-800\">\n                  🎉 You qualify for free shipping!\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;"],"mappings":"0GAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,KAAQ,oBAAoB,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,CAAEC,SAAS,KAAQ,2BAA2B,CAChE,OAASC,aAAa,KAAQ,eAAe,CAC7C,OAASC,MAAM,CAAEC,mBAAmB,KAAQ,iBAAiB,CAC7D,MAAO,CAAAC,UAAU,KAAM,iCAAiC,CACxD,OACEC,cAAc,CACdC,SAAS,CACTC,eAAe,CACfC,uBAAuB,KAClB,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAmB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEkB,IAAK,CAAC,CAAGnB,WAAW,CAACoB,KAAK,EAAIA,KAAK,CAACD,IAAI,CAAC,CACjD,KAAM,CAAAE,KAAK,CAAG,CAAAF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEE,KAAK,GAAI,EAAE,CAC/B,KAAM,CAAAC,WAAW,CAAG,CAAAH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,UAAU,GAAI,CAAC,CACzC,KAAM,CAAEC,IAAK,CAAC,CAAGxB,WAAW,CAACoB,KAAK,EAAIA,KAAK,CAACK,IAAI,CAAC,CAEjD,KAAM,CAAEC,OAAO,CAAEC,KAAK,CAAEC,WAAW,CAAEC,UAAW,CAAC,CAAGxB,MAAM,CAAC,CAAC,CAC5D,KAAM,CAAEyB,aAAa,CAAEC,UAAU,CAAEC,eAAe,CAAEC,cAAe,CAAC,CAAG3B,mBAAmB,CAAC,CAAC,CAE5F,KAAM,CAAC4B,OAAO,CAAEC,UAAU,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACwC,WAAW,CAAEC,cAAc,CAAC,CAAGzC,QAAQ,CAAC,EAAE,CAAC,CAElD;AACA,KAAM,CAAC0C,QAAQ,CAAEC,WAAW,CAAC,CAAG3C,QAAQ,CAAC,CACvC4C,IAAI,CAAE,CAAAhB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgB,IAAI,GAAI,EAAE,CACtBC,KAAK,CAAE,CAAAjB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEiB,KAAK,GAAI,EAAE,CACxBC,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CACRvB,KAAK,CAAE,EAAE,CACTwB,OAAO,CAAE,EAAE,CACXC,aAAa,CAAE,KAAK,CACpBC,KAAK,CAAE,EACT,CAAC,CAAC,CAEF,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGpD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACdoD,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAE1B,IAAI,CAAE,QAAQ,CAAEH,KAAK,CAAE,OAAO,CAAEF,IAAI,CAAC,CAE/E,GAAI,CAACK,IAAI,CAAE,CACTyB,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5CjC,QAAQ,CAAC,2BAA2B,CAAC,CACrC,OACF,CAEA;AACA,GAAI,CAACE,IAAI,EAAI,CAACA,IAAI,CAACE,KAAK,CAAE,CACxB4B,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7ChC,QAAQ,CAACf,SAAS,CAAC,CAAC,CAAC,CACrB,OACF,CAEA,GAAI,CAACkB,KAAK,EAAIA,KAAK,CAAC8B,MAAM,GAAK,CAAC,CAAE,CAChCF,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CACpDjC,QAAQ,CAAC,OAAO,CAAC,CACjB,OACF,CAEAgC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAAC,CAAE,CAAC1B,IAAI,CAAEH,KAAK,CAAEF,IAAI,CAAEF,QAAQ,CAAEC,QAAQ,CAAC,CAAC,CAE3C,KAAM,CAAAkC,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAEb,IAAI,CAAEc,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChChB,WAAW,CAACiB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP,CAAChB,IAAI,EAAGc,KAAK,EACb,CAAC,CAEH;AACA,GAAIP,UAAU,CAACP,IAAI,CAAC,CAAE,CACpBQ,aAAa,CAACQ,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACbD,IAAI,MACP,CAAChB,IAAI,EAAG,EAAE,EACV,CAAC,CACL,CACF,CAAC,CAED,KAAM,CAAAkB,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,MAAM,CAAG,CAAC,CAAC,CAEjB,GAAI,CAACrB,QAAQ,CAACE,IAAI,CAACoB,IAAI,CAAC,CAAC,CAAED,MAAM,CAACnB,IAAI,CAAG,kBAAkB,CAC3D,GAAI,CAACF,QAAQ,CAACG,KAAK,CAACmB,IAAI,CAAC,CAAC,CAAED,MAAM,CAAClB,KAAK,CAAG,0BAA0B,CACrE,GAAI,CAACH,QAAQ,CAACI,OAAO,CAACkB,IAAI,CAAC,CAAC,CAAED,MAAM,CAACjB,OAAO,CAAG,qBAAqB,CACpE,GAAI,CAACJ,QAAQ,CAACK,IAAI,CAACiB,IAAI,CAAC,CAAC,CAAED,MAAM,CAAChB,IAAI,CAAG,kBAAkB,CAC3D,GAAI,CAACL,QAAQ,CAAClB,KAAK,CAACwC,IAAI,CAAC,CAAC,CAAED,MAAM,CAACvC,KAAK,CAAG,mBAAmB,CAC9D,GAAI,CAACkB,QAAQ,CAACM,OAAO,CAACgB,IAAI,CAAC,CAAC,CAAED,MAAM,CAACf,OAAO,CAAG,qBAAqB,CAEpE;AACA,GAAIN,QAAQ,CAACG,KAAK,EAAI,CAAC,UAAU,CAACoB,IAAI,CAACvB,QAAQ,CAACG,KAAK,CAACqB,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAAC,CAAE,CACzEH,MAAM,CAAClB,KAAK,CAAG,4CAA4C,CAC7D,CAEA;AACA,GAAIH,QAAQ,CAACM,OAAO,EAAI,CAAC,SAAS,CAACiB,IAAI,CAACvB,QAAQ,CAACM,OAAO,CAAC,CAAE,CACzDe,MAAM,CAACf,OAAO,CAAG,sCAAsC,CACzD,CAEAI,aAAa,CAACW,MAAM,CAAC,CACrB,MAAO,CAAAI,MAAM,CAACC,IAAI,CAACL,MAAM,CAAC,CAACR,MAAM,GAAK,CAAC,CACzC,CAAC,CAED,KAAM,CAAAc,YAAY,CAAG,KAAO,CAAAZ,CAAC,EAAK,CAChCA,CAAC,CAACa,cAAc,CAAC,CAAC,CAElB,GAAI,CAACR,YAAY,CAAC,CAAC,CAAE,CACnB,OACF,CAEA,GAAI,CACF,KAAM,CAAAS,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACV,KAAM,IAAI,CAAAG,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAEA,KAAM,CAAAC,SAAS,CAAG,CAChBlD,KAAK,CAAE,CAACA,KAAK,EAAI,EAAE,EAAEmD,GAAG,CAACC,IAAI,OAAAC,oBAAA,CAAAC,qBAAA,OAAK,CAChCC,OAAO,CAAEH,IAAI,CAACG,OAAO,CAACC,GAAG,CACzBrC,IAAI,CAAEiC,IAAI,CAACG,OAAO,CAACpC,IAAI,CACvBsC,KAAK,CAAEL,IAAI,CAACG,OAAO,CAACE,KAAK,CACzBC,QAAQ,CAAEN,IAAI,CAACM,QAAQ,CACvBC,KAAK,CAAE,EAAAN,oBAAA,CAAAD,IAAI,CAACG,OAAO,CAACK,MAAM,UAAAP,oBAAA,kBAAAC,qBAAA,CAAnBD,oBAAA,CAAsB,CAAC,CAAC,UAAAC,qBAAA,iBAAxBA,qBAAA,CAA0BO,GAAG,GAAI,EAC1C,CAAC,EAAC,CAAC,CACHC,eAAe,CAAE,CACf3C,IAAI,CAAEF,QAAQ,CAACE,IAAI,CACnBC,KAAK,CAAEH,QAAQ,CAACG,KAAK,CACrBC,OAAO,CAAEJ,QAAQ,CAACI,OAAO,CACzBC,IAAI,CAAEL,QAAQ,CAACK,IAAI,CACnBvB,KAAK,CAAEkB,QAAQ,CAAClB,KAAK,CACrBwB,OAAO,CAAEN,QAAQ,CAACM,OACpB,CAAC,CACDC,aAAa,CAAEP,QAAQ,CAACO,aAAa,CACrCC,KAAK,CAAER,QAAQ,CAACQ,KAClB,CAAC,CAED,KAAM,CAAAsC,MAAM,CAAG,KAAM,CAAAxD,WAAW,CAAC,SAAY,CAC3C,KAAM,CAAAyD,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAClF,aAAa,CAACmF,MAAM,CAAE,CACjDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYvB,KAAK,CAClC,CAAC,CACDwB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACtB,SAAS,CAChC,CAAC,CAAC,CAEF,GAAI,CAACc,QAAQ,CAACS,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAV,QAAQ,CAACW,IAAI,CAAC,CAAC,CACvC,KAAM,CAAArE,KAAK,CAAG,GAAI,CAAA2C,KAAK,CAACyB,SAAS,CAACE,OAAO,EAAI,uBAAuB,CAAC,CACrEtE,KAAK,CAAC0D,QAAQ,CAAGA,QAAQ,CACzB,KAAM,CAAA1D,KAAK,CACb,CAEA,MAAO,CAAA0D,QAAQ,CAACW,IAAI,CAAC,CAAC,CACxB,CAAC,CAAE,CACDE,OAAO,CAAGvE,KAAK,EAAK,CAClBK,eAAe,CAACL,KAAK,CAAC,CACxB,CACF,CAAC,CAAC,CAEF;AACAT,QAAQ,CAAChB,SAAS,CAAC,CAAC,CAAC,CAErB;AACAiC,UAAU,CAAC,IAAI,CAAC,CAChBE,cAAc,CAAC+C,MAAM,CAACe,IAAI,CAACC,KAAK,CAAChE,WAAW,CAAC,CAE7C;AACAiE,UAAU,CAAC,IAAM,CACfpF,QAAQ,YAAAyE,MAAA,CAAYN,MAAM,CAACe,IAAI,CAACC,KAAK,CAACvB,GAAG,CAAE,CAAC,CAC9C,CAAC,CAAE,IAAI,CAAC,CAEV,CAAE,MAAOyB,GAAG,CAAE,CACZ;AACArD,OAAO,CAACtB,KAAK,CAAC,yBAAyB,CAAE2E,GAAG,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,MAAO,CAACjF,WAAW,EAAI,CAAC,GAAK,GAAG,CAAG,CAAC,CAAG,EAAE,CAC3C,CAAC,CAED,KAAM,CAAAkF,eAAe,CAAGD,iBAAiB,CAAC,CAAC,CAC3C,KAAM,CAAAE,UAAU,CAAG,CAACnF,WAAW,EAAI,CAAC,EAAIkF,eAAe,CAEvD,GAAItE,OAAO,CAAE,CACX,mBACEnB,KAAA,QAAK2F,SAAS,CAAC,0DAA0D,CAAAC,QAAA,eACvE9F,IAAA,CAACf,MAAM,EAAA6G,QAAA,cACL9F,IAAA,UAAA8F,QAAA,CAAO,gDAA8C,CAAO,CAAC,CACvD,CAAC,cACT5F,KAAA,QAAK2F,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C9F,IAAA,CAACH,eAAe,EAACgG,SAAS,CAAC,uCAAuC,CAAE,CAAC,cACrE7F,IAAA,OAAI6F,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAC3E9F,IAAA,MAAG6F,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,0CAElC,CAAG,CAAC,cACJ5F,KAAA,MAAG2F,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EAAC,gBACxC,CAACvE,WAAW,EACzB,CAAC,cACJvB,IAAA,MAAG6F,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,gDAErC,CAAG,CAAC,cACJ9F,IAAA,MAAG6F,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,iCAE1C,CAAG,CAAC,EACD,CAAC,EACH,CAAC,CAEV,CAEA;AACA,GAAIjF,OAAO,CAAE,CACX,mBACEb,IAAA,QAAK6F,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvE5F,KAAA,QAAK2F,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B9F,IAAA,QAAK6F,SAAS,CAAC,6EAA6E,CAAM,CAAC,cACnG7F,IAAA,MAAG6F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,0BAAwB,CAAG,CAAC,EACtD,CAAC,CACH,CAAC,CAEV,CAEA,mBACE5F,KAAA,QAAK2F,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC9F,IAAA,CAACf,MAAM,EAAA6G,QAAA,cACL9F,IAAA,UAAA8F,QAAA,CAAO,yCAAuC,CAAO,CAAC,CAChD,CAAC,cAGT9F,IAAA,QAAK6F,SAAS,CAAC,uEAAuE,CAAAC,QAAA,cACpF5F,KAAA,MAAA4F,QAAA,eAAG9F,IAAA,WAAA8F,QAAA,CAAQ,aAAW,CAAQ,CAAC,UAAO,CAACnF,IAAI,CAAG,WAAW,CAAG,eAAe,CAAC,WAAS,CAACH,KAAK,CAAC8B,MAAM,CAAC,UAAQ,CAAChC,IAAI,CAAG,QAAQ,CAAG,YAAY,EAAI,CAAC,CAC5I,CAAC,cAENN,IAAA,QAAK6F,SAAS,CAAC,6CAA6C,CAAAC,QAAA,cAC1D5F,KAAA,QAAK2F,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eAEpD5F,KAAA,QAAK2F,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD9F,IAAA,OAAI6F,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cAEnE9F,IAAA,CAACN,UAAU,EACToB,KAAK,CAAEA,KAAM,CACbiF,OAAO,CAAEA,CAAA,GAAM,CACb/E,UAAU,CAAC,CAAC,CACZI,cAAc,CAAC,CAAC,CAChBgC,YAAY,CAAC,CAAEC,cAAc,CAAEA,CAAA,GAAM,CAAC,CAAE,CAAC,CAAC,CAC5C,CAAE,CACF2C,SAAS,CAAEhF,UAAW,CACtBC,aAAa,CAAEA,aAAc,CAC7B4E,SAAS,CAAC,MAAM,CACjB,CAAC,cAEF3F,KAAA,SAAM+F,QAAQ,CAAE7C,YAAa,CAACyC,SAAS,CAAC,WAAW,CAAAC,QAAA,eAEjD5F,KAAA,QAAA4F,QAAA,eACE9F,IAAA,OAAI6F,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,cAEhF5F,KAAA,QAAK2F,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD5F,KAAA,QAAA4F,QAAA,eACE9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,aAEhE,CAAO,CAAC,cACR9F,IAAA,UACEkG,IAAI,CAAC,MAAM,CACXvE,IAAI,CAAC,MAAM,CACXc,KAAK,CAAEhB,QAAQ,CAACE,IAAK,CACrBwE,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,2FAAAhB,MAAA,CACP3C,UAAU,CAACP,IAAI,CAAG,gBAAgB,CAAG,iBAAiB,CACrD,CACHyE,WAAW,CAAC,sBAAsB,CACnC,CAAC,CACDlE,UAAU,CAACP,IAAI,eACd3B,IAAA,MAAG6F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE5D,UAAU,CAACP,IAAI,CAAI,CAC9D,EACE,CAAC,cAENzB,KAAA,QAAA4F,QAAA,eACE9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,gBAEhE,CAAO,CAAC,cACR9F,IAAA,UACEkG,IAAI,CAAC,KAAK,CACVvE,IAAI,CAAC,OAAO,CACZc,KAAK,CAAEhB,QAAQ,CAACG,KAAM,CACtBuE,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,2FAAAhB,MAAA,CACP3C,UAAU,CAACN,KAAK,CAAG,gBAAgB,CAAG,iBAAiB,CACtD,CACHwE,WAAW,CAAC,yBAAyB,CACtC,CAAC,CACDlE,UAAU,CAACN,KAAK,eACf5B,IAAA,MAAG6F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE5D,UAAU,CAACN,KAAK,CAAI,CAC/D,EACE,CAAC,EACH,CAAC,cAEN1B,KAAA,QAAK2F,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,WAEhE,CAAO,CAAC,cACR9F,IAAA,aACE2B,IAAI,CAAC,SAAS,CACdc,KAAK,CAAEhB,QAAQ,CAACI,OAAQ,CACxBsE,QAAQ,CAAE5D,iBAAkB,CAC5B8D,IAAI,CAAE,CAAE,CACRR,SAAS,2FAAAhB,MAAA,CACP3C,UAAU,CAACL,OAAO,CAAG,gBAAgB,CAAG,iBAAiB,CACxD,CACHuE,WAAW,CAAC,6BAA6B,CAC1C,CAAC,CACDlE,UAAU,CAACL,OAAO,eACjB7B,IAAA,MAAG6F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE5D,UAAU,CAACL,OAAO,CAAI,CACjE,EACE,CAAC,cAEN3B,KAAA,QAAK2F,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACzD5F,KAAA,QAAA4F,QAAA,eACE9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,QAEhE,CAAO,CAAC,cACR9F,IAAA,UACEkG,IAAI,CAAC,MAAM,CACXvE,IAAI,CAAC,MAAM,CACXc,KAAK,CAAEhB,QAAQ,CAACK,IAAK,CACrBqE,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,2FAAAhB,MAAA,CACP3C,UAAU,CAACJ,IAAI,CAAG,gBAAgB,CAAG,iBAAiB,CACrD,CACHsE,WAAW,CAAC,MAAM,CACnB,CAAC,CACDlE,UAAU,CAACJ,IAAI,eACd9B,IAAA,MAAG6F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE5D,UAAU,CAACJ,IAAI,CAAI,CAC9D,EACE,CAAC,cAEN5B,KAAA,QAAA4F,QAAA,eACE9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,SAEhE,CAAO,CAAC,cACR9F,IAAA,UACEkG,IAAI,CAAC,MAAM,CACXvE,IAAI,CAAC,OAAO,CACZc,KAAK,CAAEhB,QAAQ,CAAClB,KAAM,CACtB4F,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,2FAAAhB,MAAA,CACP3C,UAAU,CAAC3B,KAAK,CAAG,gBAAgB,CAAG,iBAAiB,CACtD,CACH6F,WAAW,CAAC,OAAO,CACpB,CAAC,CACDlE,UAAU,CAAC3B,KAAK,eACfP,IAAA,MAAG6F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE5D,UAAU,CAAC3B,KAAK,CAAI,CAC/D,EACE,CAAC,cAENL,KAAA,QAAA4F,QAAA,eACE9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,WAEhE,CAAO,CAAC,cACR9F,IAAA,UACEkG,IAAI,CAAC,MAAM,CACXvE,IAAI,CAAC,SAAS,CACdc,KAAK,CAAEhB,QAAQ,CAACM,OAAQ,CACxBoE,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,2FAAAhB,MAAA,CACP3C,UAAU,CAACH,OAAO,CAAG,gBAAgB,CAAG,iBAAiB,CACxD,CACHqE,WAAW,CAAC,SAAS,CACtB,CAAC,CACDlE,UAAU,CAACH,OAAO,eACjB/B,IAAA,MAAG6F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAE5D,UAAU,CAACH,OAAO,CAAI,CACjE,EACE,CAAC,EACH,CAAC,EACH,CAAC,cAGN7B,KAAA,QAAA4F,QAAA,eACE9F,IAAA,OAAI6F,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAE1E5F,KAAA,QAAK2F,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB5F,KAAA,UAAO2F,SAAS,CAAC,yFAAyF,CAAAC,QAAA,eACxG9F,IAAA,UACEkG,IAAI,CAAC,OAAO,CACZvE,IAAI,CAAC,eAAe,CACpBc,KAAK,CAAC,KAAK,CACX6D,OAAO,CAAE7E,QAAQ,CAACO,aAAa,GAAK,KAAM,CAC1CmE,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,CAAC,2CAA2C,CACtD,CAAC,cACF3F,KAAA,QAAK2F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC9F,IAAA,CAACJ,SAAS,EAACiG,SAAS,CAAC,4BAA4B,CAAE,CAAC,cACpD7F,IAAA,SAAM6F,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,kBAAgB,CAAM,CAAC,EACxE,CAAC,EACD,CAAC,cAER5F,KAAA,UAAO2F,SAAS,CAAC,yFAAyF,CAAAC,QAAA,eACxG9F,IAAA,UACEkG,IAAI,CAAC,OAAO,CACZvE,IAAI,CAAC,eAAe,CACpBc,KAAK,CAAC,QAAQ,CACd6D,OAAO,CAAE7E,QAAQ,CAACO,aAAa,GAAK,QAAS,CAC7CmE,QAAQ,CAAE5D,iBAAkB,CAC5BsD,SAAS,CAAC,2CAA2C,CACtD,CAAC,cACF3F,KAAA,QAAK2F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC9F,IAAA,CAACL,cAAc,EAACkG,SAAS,CAAC,4BAA4B,CAAE,CAAC,cACzD7F,IAAA,SAAM6F,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,8BAA4B,CAAM,CAAC,EACpF,CAAC,EACD,CAAC,EACL,CAAC,EACH,CAAC,cAGN5F,KAAA,QAAA4F,QAAA,eACE9F,IAAA,UAAO6F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,wBAEhE,CAAO,CAAC,cACR9F,IAAA,aACE2B,IAAI,CAAC,OAAO,CACZc,KAAK,CAAEhB,QAAQ,CAACQ,KAAM,CACtBkE,QAAQ,CAAE5D,iBAAkB,CAC5B8D,IAAI,CAAE,CAAE,CACRR,SAAS,CAAC,wGAAwG,CAClHO,WAAW,CAAC,4CAA4C,CACzD,CAAC,EACC,CAAC,cAGNpG,IAAA,WACEkG,IAAI,CAAC,QAAQ,CACbK,QAAQ,CAAE1F,OAAO,EAAII,aAAc,CACnC4E,SAAS,CAAC,0KAA0K,CAAAC,QAAA,CAEnLjF,OAAO,CAAG,kBAAkB,CAC5BI,aAAa,CAAG,gBAAgB,wBAAA4D,MAAA,CACde,UAAU,CAAE,CACzB,CAAC,EACL,CAAC,EACJ,CAAC,cAGN1F,KAAA,QAAK2F,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD9F,IAAA,OAAI6F,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cAEzE9F,IAAA,QAAK6F,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBtF,KAAK,EAAIA,KAAK,CAAC8B,MAAM,CAAG,CAAC,CAAG9B,KAAK,CAACmD,GAAG,CAAEC,IAAI,OAAA4C,qBAAA,CAAAC,qBAAA,oBAC1CvG,KAAA,QAA4B2F,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACjE9F,IAAA,QAAK6F,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B9F,IAAA,QACE0G,GAAG,CAAE,EAAAF,qBAAA,CAAA5C,IAAI,CAACG,OAAO,CAACK,MAAM,UAAAoC,qBAAA,kBAAAC,qBAAA,CAAnBD,qBAAA,CAAsB,CAAC,CAAC,UAAAC,qBAAA,iBAAxBA,qBAAA,CAA0BpC,GAAG,GAAI,0BAA2B,CACjEsC,GAAG,CAAE/C,IAAI,CAACG,OAAO,CAACpC,IAAK,CACvBkE,SAAS,CAAC,mCAAmC,CAC9C,CAAC,CACC,CAAC,cACN3F,KAAA,QAAK2F,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9F,IAAA,OAAI6F,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CACvDlC,IAAI,CAACG,OAAO,CAACpC,IAAI,CAChB,CAAC,cACLzB,KAAA,MAAG2F,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,OAAK,CAAClC,IAAI,CAACM,QAAQ,EAAI,CAAC,EAC1D,CAAC,cACNhE,KAAA,QAAK2F,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAAC,QAChD,CAAClC,IAAI,CAACG,OAAO,CAACE,KAAK,CAAGL,IAAI,CAACM,QAAQ,EACjC,CAAC,GAhBEN,IAAI,CAACG,OAAO,CAACC,GAiBlB,CAAC,EACP,CAAC,cACAhE,IAAA,QAAK6F,SAAS,CAAC,gCAAgC,CAAAC,QAAA,cAC7C9F,IAAA,MAAA8F,QAAA,CAAG,kBAAgB,CAAG,CAAC,CACpB,CACN,CACE,CAAC,cAEN5F,KAAA,QAAK2F,SAAS,CAAC,8CAA8C,CAAAC,QAAA,eAC3D5F,KAAA,QAAK2F,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C9F,IAAA,SAAM6F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAC/C5F,KAAA,SAAM2F,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,QAAC,CAACrF,WAAW,EAAI,CAAC,EAAO,CAAC,EACvD,CAAC,cACNP,KAAA,QAAK2F,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C9F,IAAA,SAAM6F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAC/C9F,IAAA,SAAM6F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC5BH,eAAe,GAAK,CAAC,CAAG,MAAM,UAAAd,MAAA,CAAOc,eAAe,CAAE,CACnD,CAAC,EACJ,CAAC,cACNzF,KAAA,QAAK2F,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvD9F,IAAA,SAAM6F,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,OAAK,CAAM,CAAC,cAC5C5F,KAAA,SAAM2F,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,QAAC,CAACF,UAAU,EAAO,CAAC,EACjD,CAAC,EACH,CAAC,CAELD,eAAe,GAAK,CAAC,eACpB3F,IAAA,QAAK6F,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cACtE9F,IAAA,MAAG6F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,6CAEtC,CAAG,CAAC,CACD,CACN,EACE,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3F,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}